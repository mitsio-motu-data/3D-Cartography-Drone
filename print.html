<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js mitsiomotu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cartographie 3D avec un drone - Documentation</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "mitsiomotu-dark" : "mitsiomotu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('mitsiomotu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Introduction</li><li class="chapter-item expanded "><a href="introduction/presentation_projet/presentation_projet.html"><strong aria-hidden="true">1.</strong> Pr√©sentation du projet</a></li><li class="chapter-item expanded "><a href="introduction/mm/mm.html"><strong aria-hidden="true">2.</strong> Mitsio Motu</a></li><li class="chapter-item expanded affix "><li class="part-title">Guide</li><li class="chapter-item expanded "><a href="guide/autorisations/autorisations.html"><strong aria-hidden="true">3.</strong> Obtention des autorisations</a></li><li class="chapter-item expanded "><a href="guide/contraintes/contraintes.html"><strong aria-hidden="true">4.</strong> Identification des contraintes</a></li><li class="chapter-item expanded "><a href="guide/planification/planification.html"><strong aria-hidden="true">5.</strong> Planification de la mission</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guide/planification/mission_planner/mission_planner.html"><strong aria-hidden="true">5.1.</strong> Grille de survol avec Mission Planner</a></li><li class="chapter-item expanded "><a href="guide/planification/litchi_angles/litchi_angles.html"><strong aria-hidden="true">5.2.</strong> Grille pour les angles avec Litchi Fly</a></li><li class="chapter-item expanded "><a href="guide/planification/carto3d/carto3d.html"><strong aria-hidden="true">5.3.</strong> Conversion du format avec Carto3D</a></li><li class="chapter-item expanded "><a href="guide/planification/litchi/litchi.html"><strong aria-hidden="true">5.4.</strong> Importation sur Litchi Fly</a></li></ol></li><li class="chapter-item expanded "><a href="guide/vol/vol.html"><strong aria-hidden="true">6.</strong> R√©alisation du vol</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guide/vol/preparation/preparation.html"><strong aria-hidden="true">6.1.</strong> Pr√©paration</a></li><li class="chapter-item expanded "><a href="guide/vol/realisation/realisation.html"><strong aria-hidden="true">6.2.</strong> R√©alisation</a></li></ol></li><li class="chapter-item expanded "><a href="guide/reconstruction/reconstruction.html"><strong aria-hidden="true">7.</strong> Reconstruction 3D</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guide/reconstruction/photogrammetrie/photogrammetrie.html"><strong aria-hidden="true">7.1.</strong> Quelques notions de photogramm√©trie</a></li><li class="chapter-item expanded "><a href="guide/reconstruction/open_drone_map/open_drone_map.html"><strong aria-hidden="true">7.2.</strong> Open Drone Map</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Recherches men√©es</li><li class="chapter-item expanded "><a href="recherches/recherches.html"><strong aria-hidden="true">8.</strong> Recherches</a></li><li class="chapter-item expanded "><a href="recherches/bibliographie/bibliographie.html"><strong aria-hidden="true">9.</strong> Bibliographie</a></li><li class="chapter-item expanded affix "><li class="part-title">Remerciements</li><li class="chapter-item expanded "><a href="remerciements/credits.html"><strong aria-hidden="true">10.</strong> Cr√©dits</a></li><li class="chapter-item expanded "><a href="remerciements/contributeurs.html"><strong aria-hidden="true">11.</strong> Contributeurs</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mitsiomotu">Mitsio Motu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mitsiomotu-dark">Mitsio Motu Dark</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Cartographie 3D avec un drone - Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/mitsio-motu-data/3D-Cartography-Drone" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pr√©sentation-du-projet"><a class="header" href="#pr√©sentation-du-projet">Pr√©sentation du projet</a></h1>
<ul>
<li><a href="https://mitsio-motu-data.github.io/HDP-Cartography-Website/">Pr√©sentation des r√©sultats et t√©l√©chargement du mod√®le 3D</a> de la cartographie de l'H√¥tel de la Paix.</li>
</ul>
<p>Ce site <strong>documente la m√©thodologie</strong> mise en place pour la <strong>cartographie 3D de b√¢timents par drone</strong>.
Il a √©t√© r√©alis√© dans le cadre d'un projet de sauvegarde de patrimoine au sein de l'entreprise <strong><a href="introduction/presentation_projet/./mm.html">Mitsio Motu</a></strong>.</p>
<p>Cette documentation regroupe :</p>
<ul>
<li>Toutes les questions que nous nous sommes pos√©s lors de la mise en place de ce projet de reconstruction 3D ainsi que les r√©ponses sourc√©es que nous y avons trouv√©es.</li>
<li>La m√©thodologie que nous avons mise en place pour le projet.</li>
</ul>
<blockquote>
<p>ü§î √Ä qui s'adresse cette documentation ?</p>
<p>Elle s'adresse autant aux employ√©s de <strong>Mitsio Motu</strong> qu'√† toute personne int√©ress√©e par la <strong>cartographie 3D de b√¢timents</strong>.
Bien que sp√©cifique √† notre projet, cette documentation est assez g√©n√©rale pour que chacun puisse en tirer des informations utiles.</p>
</blockquote>
<p>Les notions pr√©sent√©es dans cette documentation peuvent √©galement √™tre utilis√©es pour d'autres projets. Par exemple :</p>
<ul>
<li>Surveillance des cultures.</li>
<li>Inspection de toitures.</li>
<li>Recenser et compter des arbres.</li>
<li>Rendre compte de l'avancement des travaux de construction.</li>
<li>...</li>
</ul>
<h2 id="historique-du-projet"><a class="header" href="#historique-du-projet">Historique du projet</a></h2>
<p>Ce projet a √©t√© mis en place en avril 2023 pour participer √† la sauvegarde du patrimoine togolais. Cette ann√©e, l'H√¥tel de la Paix, ancien h√¥tel phare de Lom√© abandonn√© depuis 20 ans, mena√ßait d'√™tre d√©truit. <strong><a href="https://www.mitsiomotu.com/">Mitsio Motu</a></strong> a alors d√©cid√© de cartographier le b√¢timent.</p>
<figure align=center>
    <img src="introduction/presentation_projet/hdp_original_picture.jpg" width=650/>
    <figcaption>H√¥tel de la Paix (photo d'√©poque)</figcaption>
</figure>
<p>Deux m√©thodes ont √©t√© mises en place :</p>
<ul>
<li>Une cartographie classique r√©alis√©e par des √©tudiants en architecture.</li>
<li>Une cartographie 3D par drone, que nous expliquons ici.</li>
</ul>
<p>Vous pouvez retrouver les r√©sultats des deux m√©thodes sur <a href="https://mitsio-motu-data.github.io/HDP-Cartography-Website/">le site du projet</a>.</p>
<figure align=center>
    <img src="introduction/presentation_projet/hdp_3d_reconstruction.jpg" width=650/>
    <figcaption>H√¥tel de la Paix (reconstruction 3D)</figcaption>
</figure>
<div style="break-before: page; page-break-before: always;"></div><figure align="center">
    <p>
        <a href="https://www.mitsiomotu.com/" target="_blank" rel="noopener noreferrer">
            <img src="introduction/mm/mm.png" | width=150/>
        </a>
    </p>
</figure>
<h1 id="mitsio-motu"><a class="header" href="#mitsio-motu">Mitsio Motu</a></h1>
<ul>
<li><a href="https://www.mitsiomotu.com/">Site de Mitsio Motu</a></li>
</ul>
<p>Cette documentation a √©t√© r√©dig√©e dans le cadre d'un projet de cartographie 3D au sein de l'entreprise <strong><a href="https://www.mitsiomotu.com/">Mitsio Motu</a></strong>. Mitsio Motu est une entreprise de conseil bas√©e en Afrique de l'Ouest. Elle travaille avec des gouvernements, des institutions publiques et des entreprises priv√©es pour √©tablir des strat√©gies de d√©veloppement en se basant sur la donn√©e.</p>
<p>Mitsio Motu r√©alise r√©guli√®rement des collectes de donn√©es aupr√®s des populations d'Afrique de l'Ouest. Par exemple, en 2022, ce sont 700 collecteurs qui ont parcouru le Togo pendant 7 mois pour recenser toutes les infrastructures du pays : h√¥pitaux, √©coles, restaurants, points d'eau, ... La donn√©e collect√©e permet de proposer des plans de d√©ploiement d'infrastructures (lampadaires par exemple) adapt√©s aux besoins de la population.</p>
<figure align="center">
    <img src="introduction/mm/mm_prise.jpeg" | width=650/>
    <figcaption>Collecteur sur  le terrain</figcaption>
</figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="autorisations"><a class="header" href="#autorisations">Autorisations</a></h1>
<p>Le vol de drone est soumis √† des r√©glementation nationales voire locales. Avant d'entamer concr√®tement toute mission, il est indispensable de se renseigner sur la l√©gislation.</p>
<p>Il peut √™tre n√©cessaire de faire des demandes d'autorisation de vols. Il est important de conserver pr√©cieusement les papiers relatifs au drone :</p>
<ul>
<li>Facture d'achat</li>
<li>Mod√®le pr√©cis</li>
<li>Immatriculation (si applicable)</li>
<li>Papiers import/export par les douanes</li>
<li>Historique des r√©parations par le constructeur</li>
</ul>
<p>Comme l'illustre le sch√©ma ci-dessous, √† titre indicatif, il ne faut pas n√©gliger le temps des d√©marches administratives pour obtenir les autorisation n√©cessaires (section <em>mission approval</em>) au vol.</p>
<figure align="center">
    <img src="guide/autorisations/planning.jpg" | width=600/>
    <figcaption>R√©partition du temps conseill√©e entre les diff√©rentes √©tapes <a href="https://uav-guidelines.openaerialmap.org/pages/07-preparing-for-the-uav-mission/">(source)</a></figcaption>
</figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="identification-des-contraintes"><a class="header" href="#identification-des-contraintes">Identification des contraintes</a></h1>
<p>Avant toute mission, il est indispensable d'identifier les diff√©rentes contraites. Comme cette documentation est r√©dig√©e par et pour <a href="https://www.mitsiomotu.com/">Mitsio Motu</a>, les contraintes list√©es ici seront celles propres au mat√©riel de l'entreprise. Pour toute √©volution de mat√©riel, il faut re-lister toutes les contraintes pour adapter le projet.</p>
<p>Nous allons lister ici les contraintes suivant trois axes :</p>
<ol>
<li><strong>Les contraintes organisationnelles</strong> : budget, temps disponible,...</li>
<li><strong>Les contraintes mat√©rielles</strong> : mat√©riel disponible, ses capacit√©s et ses limites.</li>
<li><strong>Les contraintes du terrain</strong>, li√©es √† l'op√©ration: g√©ographie du lieu, m√©t√©o, accessibilit√©,...</li>
</ol>
<h2 id="contraintes-organisationnelles"><a class="header" href="#contraintes-organisationnelles">Contraintes organisationnelles</a></h2>
<p>Lorsque vous vous lancez dans ce projet, commencez par clarifier quelques points concernant l'organisation tels que :</p>
<ul>
<li>De combien de temps disposez-vous pour chaque √©tape ?</li>
<li>Pouvez-vous acc√©der au site sans probl√®me ?</li>
<li>Poss√©dez-vous d√©j√† les autorisations l√©gales pour le vol du ou des drone(s) ?</li>
<li>Quel budget est disponible pour le projet ?</li>
</ul>
<h2 id="contraintes-mat√©rielles"><a class="header" href="#contraintes-mat√©rielles">Contraintes mat√©rielles</a></h2>
<h3 id="drone"><a class="header" href="#drone">Drone</a></h3>
<p>Le drone de <a href="https://www.mitsiomotu.com/">Mitsio Motu</a> est le <a href="https://www.dji.com/mavic-air-2/specs">Mavic Air 2</a>. C'est un tr√®s bon drone amateur. Il embarque une cam√©ra (photo et vid√©o) et une balise GPS/GLONNASS.</p>
<figure align="center">
    <img src="guide/contraintes/drone_mavic.jpg" | width=500/>
    <figcaption>Drone Mavic Air 2</figcaption>
</figure>
<p>Voici les contraintes √† prendre en compte avec ce drone :</p>
<ul>
<li>3 batteries de 20 √† 25 minutes d'autonomie</li>
<li>Appareil photo 12MP (3000x4000 px) ou 48MP (6000x8000 px)</li>
<li>Capteur RGB (pas multispectral)</li>
<li>Prise d'images en JPG et DNG (format RAW de DJI)</li>
<li>Pas de planification de vol pr√©vue par le constructeur (contrainte contourn√©e par l'<a href="guide/contraintes/../planification/planification.html">utilisation de Litchi Fly</a>)</li>
<li>Papiers relatifs au drone et √† son import au Togo √©gar√©s</li>
<li>Stockage de 8Go embarqu√© sur le drone + une carde micro SD de 128Go</li>
</ul>
<h3 id="ordinateur"><a class="header" href="#ordinateur">Ordinateur</a></h3>
<p>La phase de reconstruction d'un mod√®le 3D demande de la puissance de calcul. Le tableau ci-dessous est extrait de la <a href="https://docs.opendronemap.org/installation/#id4">documentation d'ODM</a> (logiciel que nous utilisons pour <a href="guide/contraintes/../reconstruction/reconstruction.html">la reconstruction</a>) et pr√©sente les recommendations de hardware en fonction du nombre d'images.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: right">Number of images</th><th style="text-align: right">RAM of RAM + Swap</th></tr></thead><tbody>
<tr><td style="text-align: right">40</td><td style="text-align: right">4</td></tr>
<tr><td style="text-align: right">250</td><td style="text-align: right">16</td></tr>
<tr><td style="text-align: right">500</td><td style="text-align: right">32</td></tr>
<tr><td style="text-align: right">1500</td><td style="text-align: right">64</td></tr>
<tr><td style="text-align: right">2500</td><td style="text-align: right">128</td></tr>
<tr><td style="text-align: right">3500</td><td style="text-align: right">192</td></tr>
<tr><td style="text-align: right">5000</td><td style="text-align: right">256</td></tr>
</tbody></table>
</div>
<p>Le projet de l'H√¥tel de la Paix requiert par exemble environ 2500 images. Aucun ordinateur de l'entreprise n'a 128Go de RAM. Plusieurs solutions sont possibles pour contourner ce probl√®me :</p>
<ol>
<li>Reconstruire le b√¢timent par section et faire du recalage ensuite</li>
<li>Allouer un tr√®s grand <a href="https://fr.wikipedia.org/wiki/Espace_d%27%C3%A9change">swap</a> et traiter la totalit√© en une seule fois</li>
</ol>
<p>Nous approfondirons ces points dans la section <a href="guide/contraintes/../reconstruction/reconstruction.html">Reconstruction</a>.</p>
<h2 id="contraintes-du-terrain"><a class="header" href="#contraintes-du-terrain">Contraintes du terrain</a></h2>
<h3 id="g√©ographie-du-lieu"><a class="header" href="#g√©ographie-du-lieu">G√©ographie du lieu</a></h3>
<p>Avant de faire l'acquisition, il est tr√®s important de se rendre sur le lieu, surtout si les vols vont se faire de mani√®re automatis√©e. Cela permet de se rendre compte de potentiels probl√®mes lors de l'acquisition. Si possible, il faut faire cette reconnaissance avec le drone pour prendre quelques mesures.</p>
<p>Par exemple, lors du projet de l'H√¥tel de la Paix, se rendre sur le terrain en avance a permis de :</p>
<ul>
<li>Prendre des mesures de hauteur des diff√©rents toits pour programmer ensuite les altitudes de vol du drone</li>
<li>Rep√©rer des zones probl√©matiques o√π les vols devront √™tre effectu√©s manuellement</li>
<li>Rep√©rer les couloirs de vols qui √©vitent les palmiers üå¥</li>
<li>Faire des tests de filtres polarisants avec la cam√©ra du drone et la couleur du b√¢timent</li>
<li>D√©couper le b√¢timent en sections √† acqu√©rir</li>
</ul>
<h3 id="infrastructures"><a class="header" href="#infrastructures">Infrastructures</a></h3>
<p>Des questions utiles doivent √™tre pos√©es :</p>
<ul>
<li>Y a-t-il de l'√©lectricit√© sur le lieu ? Pour le rechargement des batteries du drone le jour J.</li>
<li>Y a-t-il un endroit pratique pour travailler sur ordinateur ? Pour modifier les plans de vol en direct si besoin.</li>
<li>Le lieu est-il fr√©quent√© ? Si oui, quelles sont les meilleures horaires pour √©viter d'√™tre d√©rang√© ?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="planification-de-la-mission"><a class="header" href="#planification-de-la-mission">Planification de la mission</a></h1>
<p>Le drone <a href="https://www.dji.com/mavic-air-2/specs"><strong>Mavic Air 2</strong></a> de <a href="https://www.dji.com/">DJI</a> est normalement destin√© √† un usage personnel et non professionnel. Il n'inclut pas la possibilit√© de pr√©voir des vols autonomes et doit normalement √™tre pilot√© √† la main par l'op√©rateur. Cependant, il est possible de contourner cela gr√¢ce √† l'utilisation de diff√©rents logiciels que nous allons pr√©senter ici.</p>
<p>Les √©tapes √† suivre pour mettre en place le vol autonome sont les suivantes :</p>
<ol>
<li>Pr√©voir des points GPS √† rallier gr√¢ce √† <a href="guide/planification/mission_planner.html"><strong>Mission Planner</strong></a> ou <a href="guide/planification/litchi_angles.html"><strong>Litchi Fly</strong></a>.</li>
<li>Convertir les points dans le format de <strong>Litchi Fly</strong> et √©diter la mission (verticalit√© par exemple) gr√¢ce √† <a href="guide/planification/carto3d.html"><strong>Carto3D</strong></a>.</li>
<li>V√©rifier les param√®tres g√©n√©raux de la mission sur <a href="guide/planification/litchi.html"><strong>Litchi Fly</strong></a>.</li>
</ol>
<p>Plus pr√©cis√©ment, voici le diagramme complet repr√©sentant la file de traitement pour la pr√©paration des missions. Cela permet √©galement de clarifier la place et l'utilit√© de chaque logiciel dans la file de traitement.</p>
<figure align="center">
    <img src="guide/planification/chart.png" | width=650/>
    <figcaption>Diagramme pr√©sentant toute les √©tapes de la planification de vol - Cr√©√© gr√¢ce √† <a href="https://www.lucidchart.com/pages/">Lucid Chart</a></figcaption>
</figure>
<h2 id="quels-sont-les-vols-√†-pr√©voir-"><a class="header" href="#quels-sont-les-vols-√†-pr√©voir-">Quels sont les vols √† pr√©voir ?</a></h2>
<p>Pour cartographier un b√¢timent de cette taille, il est presque indispensable de planifier les vols pour plusieurs raisons :</p>
<ul>
<li>C'est tr√®s fastidieux √† la main et une bonne ma√Ætrise de pilotage de drones est n√©cessaire.</li>
<li>Les images doivent √™tre prises d'une mani√®re tr√®s pr√©cise (elles doivent avoir un certain pourcentage de recouvrement). Planifier le vol permet que les images soient bien prises. √Ä la main, les erreurs sont trop faciles √† faire. Les erreurs d'acquisition entravent grandement la qualit√© de la reconstruction (voire la rendent impossible). Cependant, nous verrons que dans certains cas, les vols ne peuvent s'effectuer qu'√† la main.</li>
<li>Un vol planifi√© sera souvent plus rapidement effectu√© sur le terrain qu'√† la main. Cela permet donc d'√©conomiser de la batterie.</li>
</ul>
<p>‚ö†Ô∏è Cependant, il n'est pas possible de planifier une seule tr√®s grande mission pour tout le b√¢timent. Du moins, les logiciels que nous utilisons ne le permettent pas. Il faut d√©couper le tout en plusieurs morceaux. Voyons donc maintenant comment sectionner cette mission pour la planifier. Les param√®tres conseill√©s ne sont pas obligatoires. N'h√©sitez pas √† les adapter si vous pensez que c'est n√©cessaire.</p>
<p>Nous allons ici consid√©rer qu'il s'agit de la cartographie d'un grand b√¢timent, comme c'√©tait le cas pour l'H√¥tel de la Paix.
C'est une configuration complexe (par sa grande taille et sa forme biscornue) qui permettra d'aborder de nombreux points.</p>
<p>√Ä vous ensuite d'adapter ces informations √† votre projet ! üòâ</p>
<blockquote>
<p>üìö Quelques termes et notions avant de commencer !</p>
<ul>
<li><strong>Vol horizontal</strong> : Vol dont le plan est parall√®le au sol. Permet d'acqu√©rir le sol par exemple.</li>
<li><strong>Vol vertical</strong> : Vol dont le plan est perpendiculaire au sol. Permet d'acqu√©rir les fa√ßades par exemple.</li>
<li><strong>Cam√©ra √†</strong> :
<ul>
<li><strong>0¬∞</strong> : Elle pointe vers le sol.</li>
<li><strong>90¬∞</strong> : Elle est perpendiculaire au sol. Elle pointe vers un mur par exemple.</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="le-sol"><a class="header" href="#le-sol">Le sol</a></h3>
<blockquote>
<ul>
<li>Vol horizontal</li>
<li>Plat : cam√©ra √† 0¬∞ et grille simple</li>
<li>Relief (ou b√¢timent) : cam√©ra √† 45¬∞ et grille crois√©e</li>
<li>Altitude en fonction de la pr√©cision voulue et de la taille du terrain (et donc longueur de la mission et nombre de photos).</li>
<li>√Ä planifier sur Mission Planner (voir la partie <a href="guide/planification/mission_planner.html">Grille de survol avec Mission Planner</a>)</li>
</ul>
</blockquote>
<p>Pour acqu√©rir du sol en particulier. En fonction de la pr√©cision voulue, le vol peut √™tre assez bas mais peut monter jusqu'√† l'altitude maximale du drone.</p>
<p>La fa√ßon la plus simple d'op√©rer est de planifier une grille simple. Cependant si des b√¢timents sont pr√©sents sur le terrain et que vous ne voulez pas perdre les fa√ßades, vous pouvez faire une acquisition en grille crois√©e avec la cam√©ra orient√©e √† 45%. Attention, celle-ci sera beaucoup plus longue et lourde en stockage et traitement.</p>
<h3 id="le-toit"><a class="header" href="#le-toit">Le toit</a></h3>
<blockquote>
<ul>
<li>Vol horizontal.</li>
<li>Plat : cam√©ra √† 0¬∞ et grille simple</li>
<li>Relief : cam√©ra √† 45¬∞ et grille crois√©e</li>
<li>Altitude √† +/- 15m du toit environ en fonction de la pr√©cision voulue.</li>
<li>√Ä planifier sur Mission Planner (voir la partie <a href="guide/planification/mission_planner.html">Grille de survol avec Mission Planner</a>).</li>
</ul>
</blockquote>
<p>Dans la majorit√© des cas, un vol en grille simple avec la cam√©ra √† 0¬∞ suffira. Attention, l'altitude de vol donn√©e ici est relative au toit et non pas au sol. Il faudra trouver un moyen de conna√Ætre la hauteur maximale du b√¢timent cartographi√©. Vous pouvez estimer sa hauteur gr√¢ce √† son nombre d'√©tages ou bien faire un pr√©vol avec le drone pour aller relever les altitudes de la toiture. Pour cela, placez la cam√©ra du drone √† 90¬∞ et faite le voler jusqu'√† ce que le niveau que vous souhaitez mesurer soit au centre de l'image. L'altitude du drone, √† ce moment, correspond √† la hauteur du toit.</p>
<figure align="center">
    <img src="guide/planification/roof.jpg" | width=600/>
    <figcaption>Exemple d'un bon rendu de la cam√©ra pour mesurer la hauteur d'un b√¢timent</figcaption>
</figure>
<p>Vous pouvez ensuite cr√©er un plan avec les hauteurs de votre b√¢timent comme celui-ci par exemple :</p>
<figure align="center">
    <img src="guide/planification/roof_altitudes.jpg" | width=600/>
    <figcaption>Hauteurs du toit et des terrasses de l'H√¥tel de la Paix</figcaption>
</figure>
<h3 id="les-fa√ßades"><a class="header" href="#les-fa√ßades">Les fa√ßades</a></h3>
<blockquote>
<ul>
<li>Vol vertical.</li>
<li>Cam√©ra √† 90¬∞.</li>
<li>Grille simple.</li>
<li>Distance de +/- 15m du mur environ en fonction de la pr√©cision voulue et des obstacles.</li>
<li>√Ä planifier sur Mission Planner (voir la partie <a href="guide/planification/mission_planner.html">Grille de survol avec Mission Planner</a>).</li>
</ul>
</blockquote>
<p>Pour chaque fa√ßade, il faudra faire une mission diff√©rente car la file de traitement prend (pour l'instant) seulement les missions sur une m√™me ligne.</p>
<h3 id="les-angles"><a class="header" href="#les-angles">Les angles</a></h3>
<blockquote>
<ul>
<li>Vol vertical.</li>
<li>Cam√©ra √† 90¬∞.</li>
<li>Grille simple.</li>
<li>Distance de +/- 15m du mur environ en fonction de la pr√©cision voulue et des obstacles.</li>
<li>√Ä planifier sur Litchi Fly (voir la partie <a href="guide/planification/litchi_angles.html">Grille pour les angles avec Litchi Fly</a>) ou √† faire en manuel.</li>
</ul>
</blockquote>
<p>L'acquisition des angles est primordiale pour que le logiciel de reconstruction comprenne le lien entre les fa√ßades et puisse tout reconstruire lui m√™me. Il faut que les photos de ces missions couvrent un peu de chaque fa√ßade.</p>
<p>(voir la partie <a href="guide/planification/litchi_angles.html">Grille pour les angles avec Litchi Fly</a>)</p>
<h3 id="zone-g√©n√©rale"><a class="header" href="#zone-g√©n√©rale">Zone g√©n√©rale</a></h3>
<blockquote>
<ul>
<li>Vol horizontal.</li>
<li>Plat : cam√©ra √† 0¬∞ et grille simple</li>
<li>Relief (b√¢timents) : cam√©ra √† 45¬∞ et grille crois√©e</li>
<li>Altitude de +/- 40m environ en fonction de la pr√©cision voulue et de la taille du terrain (et donc longueur de la mission et nombre de photos).</li>
<li>√Ä planifier sur Mission Planner (voir la partie <a href="guide/planification/mission_planner.html">Grille de survol avec Mission Planner</a>).</li>
</ul>
</blockquote>
<p>Bien que les caract√©ristiques soient tr√®s similaires avec l'acquisition du sol, ce sont deux choses tr√®s diff√©rentes. Par exemple, pour l'acquisition de l'H√¥tel de la Paix, nous avons fait :</p>
<ul>
<li>Une <strong>acquisition g√©n√©rale</strong> de la zone √† 40 et 50 m d'altitude en grille crois√©e (voir polygone bleu dans l'image ci-dessous) incluant le b√¢timent principal et un peu de terrain. Cela permet d'obtenir de l'information g√©n√©rale sur le terrain et d'augmenter la qualit√© de la reconstruction. De plus, cela permet d'avoir des information (m√™me si moyennement pr√©cises) sur tout le b√¢timent et donc de s'assurer que le logiciel de reconstruction pourra faire le lien entre les diff√©rentes zones du b√¢timent.</li>
<li>Une <strong>acquisition de type sol</strong> sur la zone autour de la piscine. √Ä plus basse altitude, elle permet de se focaliser sur une zone qui nous int√©resse et d'avoir une meilleure r√©solution dans une zone sp√©cifique. Certains petits b√¢timents √©taient pr√©sents dans cette zone. Nous avons fait l'erreur de faire malgr√© tout une acquisition en grille simple et non crois√©e. Il nous manque donc un peu des fa√ßades de ces b√¢timents.</li>
</ul>
<figure align="center">
    <img src="guide/planification/zone.jpg" | width=900/>
    <figcaption>Bleu : Acquisition g√©n√©rale - Jaune : Acquisition de sol</figcaption>
</figure>
<h3 id="zones-d√©licates"><a class="header" href="#zones-d√©licates">Zones d√©licates</a></h3>
<p>Certaines zones, trop √©troites par exemple doivent √™tre acquises de mani√®re manuelle. √Ä vous de juger les zones pour lesquelles c'est n√©cessaire. Attention, l'op√©rateur du drone doit bien respecter les recouvrements entre les images.</p>
<h2 id="organisation-de-la-planification"><a class="header" href="#organisation-de-la-planification">Organisation de la planification</a></h2>
<h3 id="suivi"><a class="header" href="#suivi">Suivi</a></h3>
<p>Ainsi d√©coup√©, un seul b√¢timent comporte rapidement plusieurs dizaines de missions planifi√©es diff√©rentes. Par exemple pour l'h√¥tel de la paix, nous avions d√©coup√© l'acquisition en 25 mission. De plus, comme nous utilisions 3 drones diff√©rents, nous avons planifi√© toutes les missions pour tous les drones ce qui faisait au total 75 missions.</p>
<p>√Ä ce stade, il est indispensable de pr√©voir un outil pour suivre l'√©tat de la planification. Nous avions par exemple utilis√© un <em>Google Sheet</em>.</p>
<figure align="center">
    <img src="guide/planification/google_sheet.jpg" | width=700/>
    <figcaption>Fiche de suivi de l'√©tat de la planification</figcaption>
</figure>
<h3 id="nomenclature"><a class="header" href="#nomenclature">Nomenclature</a></h3>
<p>Il va √©galement falloir manipuler de nombreux fichiers :</p>
<ul>
<li>Les fichiers <em>.waypoints</em> de Mission Planner</li>
<li>Les fichiers <em>.csv</em> de Carto3D</li>
<li>Les fichiers <em>.csv</em> de Litchi Fly</li>
</ul>
<p>Pour s'y retrouver et facilement comprendre √† quoi correspond chaque fichier, il faut mettre en place une nomenclature. Voici par exemple ce que nous avions cr√©√© pour le projet H√¥tel de la Paix  :</p>
<figure align="center">
    <img src="guide/planification/naming.jpg" | width=600/>
    <figcaption>Nomenclature √† l'h√¥tel de la paix</figcaption>
</figure>
<p>En plus de cette nomenclature, nous ajoutions :</p>
<ul>
<li>en <strong>pr√©fixe</strong> le mod√®le du drone pour lequel la mission √©tait destin√©e
<ul>
<li>Mavic Air 2 : <code>ma</code></li>
<li>Mavic 2 Pro : <code>mp</code></li>
<li>Phantom Pro v4 : <code>pp</code></li>
</ul>
</li>
<li>en <strong>suffixe</strong> la distance √† la surface de la mission (en m)</li>
</ul>
<p>Ainsi, une mission du Mavic Air 2 √† 8m du pan de mur en rose clair dans l'angle haut droit de l'image s'appellerait  : <code>ma_edge_back_right_8</code>.</p>
<blockquote>
<p>‚úçÔ∏è C'est une pratique rendant le travail et la collaboration beaucoup plus faciles.
Il est √©galement indispensable de documenter la nomenclature choisie pour que le travail soit repris facilement par quelqu'un d'autre ou bien beaucoup plus tard.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="grille-de-survol-avec-mission-planner"><a class="header" href="#grille-de-survol-avec-mission-planner">Grille de survol avec Mission Planner</a></h1>
<p><a href="https://ardupilot.org/planner/"><strong>Site de Mission Planner</strong></a></p>
<blockquote>
<p>Tutoriel √©crit avec la version <strong>1.3.8479.20539</strong> de Mission Planner</p>
</blockquote>
<p>R√©aliser un vol d'acquisition est long et fastidieux. De plus, les images de la zone acquise doivent √™tre prises avec un recouvrement sp√©cifique. Utiliser un logiciel qui planifie les missions permet de s'assurer que la prise d'images sera bonne et permet que l'op√©rateur drone r√©alise la mission plus facilement. Pour faire cela, nous utilisons <a href="https://ardupilot.org/planner/">Mission Planner</a>. C'est un logiciel gratuit et Open Source qui permet de pr√©voir des vols autonomes sous forme de grilles.</p>
<p>Nous appellerons <strong>&quot;mission horizontale&quot;</strong> un vol sur un plan parall√®le au sol (par exemple pour cartographier un parc) et <strong>&quot;mission verticale&quot;</strong> un vol sur un plan perpendiculaire au sol (par exemple pour cartographier une fa√ßade de b√¢timent).</p>
<blockquote>
<p>üö® Soyez pr√©venu, Mission Planner est un logiciel qui pr√©sente de nombreux bugs.
Il est possible qu'avec de nouvelles mises √† jour, certains soient r√©solus et que d'autres apparaissent.
Nous allons essayer de vous guider au mieux dans le logiciel.</p>
</blockquote>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>Commencez par installer Mission Planner en suivant les instructions de <a href="https://ardupilot.org/planner/docs/mission-planner-installation.html">la documentation</a>.</p>
<h2 id="ouverture-de-mission-planner-et-home"><a class="header" href="#ouverture-de-mission-planner-et-home">Ouverture de Mission Planner et <em>Home</em></a></h2>
<p>En ouvrant Mission Planner, vous arriverez sur un √©cran similaire. Rendez-vous dans la section <strong>PLAN</strong>, accessible par le bouton encadr√© en bleu.</p>
<figure align="center">
    <img src="guide/planification/mission_planner/home.jpg" | width=650/>
    <figcaption>√âcran d'accueil de Mission Planner</figcaption>
</figure>
<p>Placez le point de d√©part et d'arriv√©e (<em>Home</em>) :</p>
<ul>
<li>Soit √† la main : <code>Clic droit</code> &gt; <code>Set home here</code></li>
<li>Soit avec les coordonn√©es GPS : en bas du panneau de droite (voir photo ci-dessous)</li>
</ul>
<p>L'id√©al est de placer ce point vers la zone de la mission mais sa position n'a pas de v√©ritable importance car il ne sera en fait pas utilis√© dans nos missions.
Le placer permet cependant de travailler plus facilement avec Mission Planner qui veut qu'un point <em>Home</em> soit d√©fini.</p>
<figure align="center">
    <img src="guide/planification/mission_planner/set_home.jpg" | width=650/>
    <figcaption>D√©finition d'un point <i>Home</i></figcaption>
</figure>
<h2 id="mission-horizontale"><a class="header" href="#mission-horizontale">Mission horizontale</a></h2>
<p>Cr√©ez un polygon repr√©sentant la zone que le drone doit couvrir. <code>Clic droit</code> &gt; <code>Polygon</code> &gt; <code>Draw a Polygon</code> (ou <code>Load Polygon</code> pour importer un fichier).</p>
<figure align="center">
    <img src="guide/planification/mission_planner/draw_polygon.jpg" | width=650/>
    <figcaption>Cr√©ation d'un polygone</figcaption>
</figure>
<p>Voici √† quoi devrait ressembler votre interface une fois le polygone dessin√© :</p>
<figure align="center">
    <img src="guide/planification/mission_planner/polygon.jpg" | width=650/>
    <figcaption>Polygone</figcaption>
</figure>
<p>Il faut ensuite g√©n√©rer le parcours. Pour cela, utilisez la fonction de quadrillage (ou <code>Survey (Grid)</code>). <code>Clic droit</code> &gt; <code>Auto WP</code> &gt; <code>Survey (Grid)</code></p>
<figure align="center">
    <img src="guide/planification/mission_planner/survey_grid.jpg" | width=650/>
    <figcaption>Chemin vers <i>Survey grid</i></figcaption>
</figure>
<p>Une nouvelle fen√™tre appara√Æt. Elle va permettre de param√©trer le quadrillage pour la grille de survol.</p>
<ol>
<li>
<p>Commencez par activer les options avanc√©es. Dans le panneau de droite : <code>Simple</code> &gt; <code>Display</code> &gt; <code>Advanced Options</code></p>
</li>
<li>
<p>V√©rifiez si le mod√®le du drone (et donc les param√®tres de sa cam√©ra) est connu de Mission Planner. Si c'est le cas s√©lectionnez le mod√®le du drone. Si ce n'est pas le cas nous d√©terminerons les param√®tres de la cam√©ra dans les √©tapes suivantes, <strong>la premi√®re fois uniquement</strong>.</p>
<p>Dans le panneau de droite : <code>Simple</code> &gt; <code>Simple Options</code> &gt; <code>Camera</code></p>
</li>
<li>
<p>Rendez-vous dans le menu des param√®tres de la cam√©ra.
Dans le panneau de droite : <code>Camera Config</code></p>
</li>
</ol>
<figure align="center">
    <img src="guide/planification/mission_planner/start_survey_grid.jpg" | width=650/>
</figure>
<p>Les √©tapes 1 et 2 sont n√©cessaires seulement si le mod√®le du drone n'est pas connu de Mission Planner et <strong>la premi√®re fois uniquement</strong>.</p>
<ol>
<li>
<p>Importez une image captur√©e par le drone. Cela va permettre √† Mission Planner de d√©terminer automatiquement les param√®tres <em>focal length</em>, <em>image width (pxl)</em> et <em>image height (pxl)</em>.
‚ö†Ô∏è Les deux param√®tres restants (taille du <em>sensor</em>) ne peuvent pas √™tre d√©termin√©s par Mission Planner (bien que les champs soient remplis, ce sont les param√®tre de la cam√©ra qui √©tait enregistr√©e par d√©faut.
Il ne sont pas mis √† jour).
Il faudra vous renseigner sur la nature de votre capteur pour remplir ces champs vous m√™me.</p>
<p>Dans le panneau de droite : <code>Camera Config</code> &gt; <code>Camera Options</code> &gt; <code>Load Sample Photo</code></p>
<p>Ci-dessous, le tableau regroupant tous les param√®tres des cam√©ras des drones d√©j√† utilis√©s chez Mitsio Motu.
Merci de mettre √† jour ce tableau √† chaque nouveau mod√®le utilis√©.</p>
</li>
</ol>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center">Mavic Air 2</th><th style="text-align: center">Mavic Pro 2</th><th style="text-align: center">Phantom 4</th></tr></thead><tbody>
<tr><td style="text-align: center"><strong>Focal length</strong></td><td style="text-align: center">4.5</td><td style="text-align: center">10.3</td><td style="text-align: center">8.8</td></tr>
<tr><td style="text-align: center"><strong>Image width (px)</strong></td><td style="text-align: center">4000</td><td style="text-align: center">5472</td><td style="text-align: center">5472</td></tr>
<tr><td style="text-align: center"><strong>Image height (px)</strong></td><td style="text-align: center">3000</td><td style="text-align: center">3648</td><td style="text-align: center">3648</td></tr>
<tr><td style="text-align: center"><strong>Sensor width( mm)</strong></td><td style="text-align: center">6.4</td><td style="text-align: center">13.31</td><td style="text-align: center">13.31</td></tr>
<tr><td style="text-align: center"><strong>Sensor height (mm)</strong></td><td style="text-align: center">4.8</td><td style="text-align: center">8.88</td><td style="text-align: center">8.88</td></tr>
<tr><td style="text-align: center"><strong>Proportion</strong></td><td style="text-align: center">4/3</td><td style="text-align: center">3/1</td><td style="text-align: center">3/1</td></tr>
</tbody></table>
</div>
<ol start="2">
<li>
<p>V√©rifiez que les param√®tres sont coh√©rents puis sauvegardez les.
Mission Planner va vous demander de renseigner le mod√®le du drone (autrement dit, son nom).
Cela permettra √† Mission Planner de l'enregistrer et de vous le proposer dans les drones connus lors de votre prochaine planification.</p>
<p>Dans le panneau de droite : <code>Camera Config</code> &gt; <code>Camera Options</code> &gt; <code>Save</code></p>
</li>
<li>
<p>S√©lectionnez le mode de capture d'images <code>DO_DIGICAM_CONTROL</code>.
Ce mode permet de pr√©ciser combien de temps le drone doit s'arr√™ter au moment de prendre la photo (afin de s'assurer que l'image soit nette).</p>
<p>Dans le panneau de droite : <code>Camera Config</code> &gt; <code>Trigger Method</code> &gt; <code>DO_DIGICAM_CONTROL</code></p>
</li>
</ol>
<figure align="center">
    <img src="guide/planification/mission_planner/cam_config.jpg" | width=650/>
</figure>
<p>Vous pouvez maintenant renseigner l'ensemble de vos param√®tres de vol dans le menu <code>Grid Options</code>.
Il faut notamment faire attention √† :</p>
<ul>
<li><code>Camera Options</code> &gt; <code>Overlap</code> et <code>Sidelap</code>, les recouvrements de vos images dans le sens de vol et sur les c√¥t√©s.<sup class="footnote-reference"><a href="#recouv">1</a></sup></li>
<li><code>Camera Options</code> &gt; <code>Cross Grid</code>, qui peut √™tre tr√®s utile dans l'acquisition de zones g√©n√©rales avec des b√¢timents.<sup class="footnote-reference"><a href="#cross-grid">2</a></sup></li>
<li><code>Copter Options</code> &gt; <code>Delay at WP (sec)</code>, le temps d'arr√™t √† chaque point.
Il n'est pas n√©cessaire d'y r√©gler le temps, nous le param√©trerons dans la section <a href="guide/planification/mission_planner/carto3d.html">Conversion du format avec Carto3D</a>.</li>
</ul>
<p>Enfin, retournez dans le menu <code>Simple</code> pour activer 3 options :</p>
<ol>
<li><code>Simple Options</code> &gt; <code>Camera top facing forward</code> :
Quand elle est activ√©e, cela signifie que la cam√©ra pointe bien vers l'avant du drone.
C'est n√©cessaire pour le calcul de la positions des <em>waypoints</em>.</li>
<li><code>Simple Options</code> &gt; <code>Use speed for this mission</code> :
Vous pouvez d'ailleurs mettre √† jour la vitesse de la mission ici.</li>
<li><code>Display</code> &gt; <code>Internals</code></li>
</ol>
<p>V√©rifiez que les points semblent coh√©rents.
Une fois satisfait, cliquez sur <code>Accept</code>.</p>
<figure align="center">
    <img src="guide/planification/mission_planner/mission_finished.jpg" | width=650/>
</figure>
<p>La fen√™tre <code>Survey (Grid)</code> se ferme et tous les points apparaissent dans le plan de vol.</p>
<h2 id="mission-verticale"><a class="header" href="#mission-verticale">Mission verticale</a></h2>
<p>Cette section pr√©sente comment pr√©parer une acquisition verticale, pour une fa√ßade par exemple.</p>
<p>Tout d'abord, sur Mission Planner, cr√©ez un polygon assez fin et parall√®le au mur que vous voulez acqu√©rir, comme illustr√© sur l'image ci-dessous.</p>
<figure align="center">
    <img src="guide/planification/mission_planner/vertical_polygon.png" | width=650/>
    <figcaption>Polygone pour l'acquisition de fa√ßade</figcaption>
</figure>
<p>√Ä m√™me titre que pour un vol horizontal, g√©n√©rez une grille automatiquement avec <code>Survey Grid</code>.
Il faudra que la grille g√©n√©r√©e ne fasse qu'une seule ligne dans le polygone dessin√©, le plus parall√®le possible au b√¢timent.
Pour cela, vous pouvez vous aider du param√®tre <code>Grid Options</code> &gt; <code>Sidelap [%]</code> (et surtout pas <code>Overlap [%]</code>).
La grille g√©n√©r√©e doit ressembler au r√©sultat ce-dessous :</p>
<figure align="center">
    <img src="guide/planification/mission_planner/vertical_grid.png" | width=650/>
    <figcaption>Chemin vers <i>Survey grid</i></figcaption>
</figure>
<p>V√©rifiez que les points semblent coh√©rents.
Une fois satisfait, cliquez sur <code>Accept</code>.</p>
<h2 id="enregistrement"><a class="header" href="#enregistrement">Enregistrement</a></h2>
<p>Maintenant que vous avez g√©n√©r√© votre grille, horizontale ou verticale, il ne vous reste plus qu'√† la sauvegarder !</p>
<ol>
<li>Activez l'option <code>Verify Height</code> pour que Mission Planner v√©rifie les altitudes renseign√©es s'il a des donn√©es disponibles pour la r√©gion en question.</li>
<li>Exportez les points.
Ils sont enregistr√©s au format <code>.waypoints</code> que vous pouvez ouvrir avec un √©diteur de texte.</li>
</ol>
<figure align="center">
    <img src="guide/planification/mission_planner/mission_height.jpg" | width=650/>
</figure>
<blockquote>
<p>üëè Et voil√† pour la section Mission Planner !
Il ne reste maintenant plus qu'√† convertir et personnaliser la mission
avec <a href="guide/planification/mission_planner/carto3d.html">Conversion du format avec Carto3D</a> et enfin √† l'importer dans Litchi avec <a href="guide/planification/mission_planner/litchi.html">Importation sur Litchi Fly</a>.</p>
</blockquote>
<hr />
<div class="footnote-definition" id="recouv"><sup class="footnote-definition-label">1</sup>
<p>Pour le projet de l'H√¥tel de la Paix, le recouvrement √©tait de 80% pour l'<em>overlap</em> et le <em>sidelap</em>.</p>
</div>
<div class="footnote-definition" id="cross-grid"><sup class="footnote-definition-label">2</sup>
<p>Une <em>cross-grid</em> est n√©cessaire pour l'acquisition compl√®te d'un terrain avec b√¢timents par exemple.
Pour pouvoir observer les fa√ßades, il faut orienter la cam√©ra non pas perpendiculairement au sol mais √† 45¬∞ par rapport au sol environ.
Avec la cam√©ra perpendiculaire, il manquera les fa√ßades de b√¢timents dans la reconstruction.
Pour pouvoir obtenir des photos de toutes les zones, il est dans ce cas indispensable de faire une acquisition en cross-grid.
Sinon, certaines zones ne pourront pas √™tre reconstitu√©es.</p>
</div>
<div class="table-wrapper"><table><thead><tr><th>Grille simple</th><th>Grille crois√©e ou <em>cross grid</em></th></tr></thead><tbody>
<tr><td><img src="guide/planification/mission_planner/simple_grid.png" alt="Simple grid" /></td><td><img src="guide/planification/mission_planner/cross_grid.png" alt="Cross grid" /></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="grille-pour-les-angles-avec-litchi-fly"><a class="header" href="#grille-pour-les-angles-avec-litchi-fly">Grille pour les angles avec Litchi Fly</a></h1>
<ul>
<li><a href="https://flylitchi.com/"><strong>Site de Litchi Fly</strong></a></li>
<li><a href="https://flylitchi.com/help#missionhub"><strong>Guide pour l'utilisateur</strong></a></li>
</ul>
<blockquote>
<p>Dans certaines configurations, il faut utiliser Litchi Fly pour g√©n√©rer la grille de vol.
Ceci est le cas pour les angles par exemple.
En effet, il s'agit de vol vertical mais pas sur un seul axe comme pour les murs.
Nous ne pouvons donc pas utiliser Mission Planner pour cela.
De plus, Litchi Fly comprend des options qui vont nous aider dans cette situation.
Cependant, ces vols peuvent aussi √™tre faits √† la main assez facilement.
Il faut dans ce cas faire tr√®s attention au recouvrement.
Nous vous conseillons de planifier les missions d'angles pour vous laisser le choix sur le terrain de la m√©thode √† utiliser.</p>
</blockquote>
<p>üí° Pour rappel, acqu√©rir les angles est important pour pouvoir faire le lien entre les diff√©rentes fa√ßades lors de la reconstruction.</p>
<h2 id="mission-hub"><a class="header" href="#mission-hub">Mission Hub</a></h2>
<p>Une fois sur le site de Litchi Fly, rendez-vous sur <a href="https://flylitchi.com/hub">Mission Hub</a>.</p>
<figure align="center">
    <img src="guide/planification/litchi_angles/welcome.jpg" | width=600/>
    <figcaption>Accueil du site Litchi Fly</figcaption>
</figure>
<p>Une fois dans le <strong>Mission Hub</strong>, s√©lectionnez <code>MISSIONS &gt; New</code>.
Placez vous l√† o√π vous voulez r√©aliser votre mission.
Nous choisissons de r√©aliser la mission pour l'angle repr√©sent√© par la ligne bleue :</p>
<figure align="center">
    <img src="guide/planification/litchi_angles/this_angle.jpg" | width=600/>
    <figcaption>Angle pour lequel nous allons r√©aliser une mission</figcaption>
</figure>
<p>Commencez par placer un <code>POI</code> (<em>Point of interest</em> ou Point d'int√©r√™t) en faisant un clic droit au niveau de votre angle.
Litchi FLy ouvre alors un petit encadr√© pour modifier la position et l'altitude de ce POI.
Son altitude n'a pas d'importance ici.</p>
<figure align="center">
    <img src="guide/planification/litchi_angles/poi.jpg" | width=600/>
    <figcaption>Positionnement de notre point d'int√©r√™t</figcaption>
</figure>
<p>Placez ensuite plusieurs <em>waypoints</em> (clic gauche) comme illustr√© ci-dessous.
Faites attention √† ce que ces points soient assez rapproch√©s.
Ici aucun calcul n'est fait pour v√©rifier que les images auront assez de recouvrement entre elles.
Il vaut mieux qu'elle en aient trop que pas assez.</p>
<figure align="center">
    <img src="guide/planification/litchi_angles/points.jpg" | width=600/>
    <figcaption>Positionnement des waypoints</figcaption>
</figure>
<p>Nous souhaitons que la cam√©ra soit point√©e en direction de l'angle, quelle que soit la position du drone dans cette mission.
Pour cela, il faut se rendre dans <code>SETTINGS</code> &gt; <code>Heading Mode</code> et activer l'option <code>Custom (WD)</code> si ce n'√©tait pas d√©j√† le cas.
Le <em>heading</em> pointera alors vers le POI le plus proche.</p>
<blockquote>
<p>Il ne vous reste plus qu'√† exporter la mission en format CSV et rendre verticale cette mission gr√¢ce √† <a href="guide/planification/litchi_angles/carto3d.html">Conversion du format avec Carto3D</a> en suivant la m√™me logique qu'une mission verticale venant de Mission Planner.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="conversion-du-format-avec-carto3d"><a class="header" href="#conversion-du-format-avec-carto3d">Conversion du format avec Carto3D</a></h1>
<p><a href="https://github.com/mitsio-motu-data/Carto3D"><strong>D√©p√¥t Github du projet</strong></a></p>
<figure align="center">
    <img src="guide/planification/carto3d/carto3d.png" | width=600/>
</figure>
<p>Cette √©tape a plusieurs int√©r√™ts :</p>
<ul>
<li>Ouvrir une mission au format de Mission Planner (<strong>.waypoints</strong>) ou de Litchi (<strong>.csv</strong>).</li>
<li><em>[Optionnel]</em> Conversion au format de Litchi si une mission Mission Planner est ouverte.</li>
<li><em>[Optionnel]</em> Convertir la mission en un vol vertical pour l'acquisition d'une fa√ßade.</li>
<li><em>[Optionnel]</em> Mettre √† jour l'altitude et la vitesse du vol.</li>
<li>D√©finir une liste d'actions √† chaque <em>waypoint</em> :
<ul>
<li>Attendre 0.5 seconde.</li>
<li>Prendre une photo.</li>
<li>Attendre 0.5 seconde.</li>
</ul>
</li>
</ul>
<p>L'installation et l'utilisation de <strong>Carto3D</strong> sont d√©taill√©es sur le <a href="https://github.com/mitsio-motu-data/Carto3D"><strong>D√©p√¥t Github du projet</strong></a> (accessible uniquement aux membres de l'organisation Mitsio Motu).</p>
<h2 id="distance-entre-les-lignes-pour-une-mission-verticale"><a class="header" href="#distance-entre-les-lignes-pour-une-mission-verticale">Distance entre les lignes pour une mission verticale</a></h2>
<p>Dans le cas d'une mission verticale, il faut faire attention √† la distance entre les lignes (<em>flight lines</em>) pour conserver le recouvrement que l'on souhaite.
La distance entre les <em>waypoints</em> est d√©j√† bonne car ils ont √©t√© g√©n√©r√©s avec <em>Mission Planner</em> en connaissant les contraintes de cam√©ra et de recouvrement.
Cependant, il faut renseigner √† <strong>Carto3D</strong> la bonne distance entre les lignes pour conserver un <em>Sidelap</em> correct.</p>
<figure align="center">
    <img src="guide/planification/carto3d/flight_lines.jpg" | width=600/>
    <figcaption>Sch√©ma issu de Carto3D illustrant les <i>flight lines</i></figcaption>
</figure>
<p>Ci-dessous, un tableau pr√©sentant la distance entre les lignes de vol pour avoir un recouvrement <em>Sidelap</em> de <strong>80%</strong> en fonction de la distance √† la surface et du drone utilis√© :</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Distance √† la surface (m)</th><th style="text-align: center">Mavic Air 2 (m)</th><th style="text-align: center">Mavic Pro 2 (m)</th><th style="text-align: center">Phantom 4 (m)</th></tr></thead><tbody>
<tr><td style="text-align: center">8</td><td style="text-align: center">2.28</td><td style="text-align: center">2.07</td><td style="text-align: center">2.42</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">2.56</td><td style="text-align: center">2.33</td><td style="text-align: center">2.72</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">2.84</td><td style="text-align: center">2.58</td><td style="text-align: center">3.02</td></tr>
<tr><td style="text-align: center">11</td><td style="text-align: center">3.13</td><td style="text-align: center">2.84</td><td style="text-align: center">3.33</td></tr>
<tr><td style="text-align: center">12</td><td style="text-align: center">3.41</td><td style="text-align: center">3.10</td><td style="text-align: center">3.63</td></tr>
<tr><td style="text-align: center">13</td><td style="text-align: center">3.7</td><td style="text-align: center">3.36</td><td style="text-align: center">3.93</td></tr>
<tr><td style="text-align: center">14</td><td style="text-align: center">3.98</td><td style="text-align: center">3.62</td><td style="text-align: center">4.23</td></tr>
<tr><td style="text-align: center">15</td><td style="text-align: center">4.27</td><td style="text-align: center">3.88</td><td style="text-align: center">4.54</td></tr>
<tr><td style="text-align: center">16</td><td style="text-align: center">4.55</td><td style="text-align: center">4.14</td><td style="text-align: center">4.84</td></tr>
<tr><td style="text-align: center">17</td><td style="text-align: center">4.84</td><td style="text-align: center">4.39</td><td style="text-align: center">5.14</td></tr>
<tr><td style="text-align: center">18</td><td style="text-align: center">5.12</td><td style="text-align: center">4.65</td><td style="text-align: center">5.44</td></tr>
<tr><td style="text-align: center">19</td><td style="text-align: center">5.4</td><td style="text-align: center">4.91</td><td style="text-align: center">5.75</td></tr>
<tr><td style="text-align: center">20</td><td style="text-align: center">5.69</td><td style="text-align: center">5.17</td><td style="text-align: center">6.05</td></tr>
</tbody></table>
</div>
<p>Si jamais vous vous trouvez dans une situation qui n'est pas repr√©sent√©e dans ce tableau, vous pouvez trouver l'information gr√¢ce √† Mission Planner :</p>
<ol>
<li>Dessinez un polygone et cr√©ez une nouvelle <code>Survey Grid</code>.</li>
<li>S√©lectionnez la cam√©ra pour votre mod√®le de drone.</li>
<li>R√©glez l'altitude √† la distance √† la surface que vous souhaitez.</li>
<li>Rendez-vous dans <code>Camera Options</code> et r√©glez le recouvrement que vous souhaitez (<code>Overlap</code> pour la distance entre les points et <code>Sidelap</code> pour la distance entre les lignes).</li>
<li>Lisez et reportez dans ce tableau la valeur de distance entre les lignes.
Vous avez votre information.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="importation-sur-litchi-fly"><a class="header" href="#importation-sur-litchi-fly">Importation sur Litchi Fly</a></h1>
<ul>
<li><a href="https://flylitchi.com/"><strong>Site de Litchi Fly</strong></a></li>
<li><a href="https://flylitchi.com/help#missionhub"><strong>Guide pour l'utilisateur</strong></a></li>
</ul>
<blockquote>
<p>üí™ La planification touche √† sa fin, plus que quelques √©tapes, courage !</p>
</blockquote>
<h2 id="mission-hub-1"><a class="header" href="#mission-hub-1">Mission Hub</a></h2>
<p>Une fois sur le site de Litchi Fly, rendez-vous sur <a href="https://flylitchi.com/hub">Mission Hub</a>.</p>
<figure align="center">
    <img src="guide/planification/litchi/../litchi_angles/welcome.jpg" | width=600/>
    <figcaption>Accueil du site Litchi Fly</figcaption>
</figure>
<p>Une fois dans le <strong>Mission Hub</strong>, s√©lectionnez <code>MISSIONS &gt; New</code>.
Importons maintenant la mission avec <code>MISSIONS &gt; Import</code>.
S√©lectionnez le <em>.csv</em> de la mission.</p>
<p>Vous pouvez cliquer sur quelques points de la mission pour v√©rifier que tout vous semble correct (altitude et vitesse par exemple) et v√©rifier que les trois actions (attendre, prendre un photo, attendre) ont bien √©t√© param√©tr√©es.</p>
<p>Il reste √† voir les param√®tres g√©n√©raux de la mission dans <code>SETTINGS</code>.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Param√®tre</th><th>Explication</th><th>Pour un vol horizontal</th><th>Pour un vol vertical</th></tr></thead><tbody>
<tr><td style="text-align: center">Units</td><td>Unit√©s de mesure</td><td></td><td></td></tr>
<tr><td style="text-align: center">Heading Mode</td><td><ul><li><b>TNW</b> : Heading qui pointe en direction du prochain waypoint.</li><li><b>ID</b> : Heading lors du d√©part conserv√©.</li><li><b>UC</b> : Contr√¥le du heading pendant la mission avec le joystick gauche.</li><li><b>WD</b> : Utilisation du heading d√©fini aux waypoints dans Litchi.</li></ul> <a href="https://flylitchi.com/help#waypoints-p3">Doc Litchi</a></td><td>Auto (TNW)</td><td><ul><li>Fa√ßade : Initial(ID)</li><li>Angle : Custom(WD)</li></ul></td></tr>
<tr><td style="text-align: center">Finish Action</td><td><strong>RTH</strong> signifie <em>Return To Home</em>, <em>HOME</em> √©tant le point de d√©part, qui se d√©fini automatiquement au lancement du drone. Les autres options ont un nom explicite. Le drone montera en haute altitude avant d'effectuer un <strong>RTH</strong> pour ne rien heuter. <br><br> Les noms des autres options sont explicites.</td><td>RTH</td><td>RTH</td></tr>
<tr><td style="text-align: center">Path Mode</td><td>Permet d'arrondir les angles du chemin de la mission. Utilis√© pour les vols esth√©tiques.</td><td>Straight Lines</td><td>Straight Lines</td></tr>
<tr><td style="text-align: center">Cruising speed</td><td>Titre explicite.</td><td>11km/s</td><td>11km/s</td></tr>
<tr><td style="text-align: center">Max Flight speed</td><td>Titre explicite.</td><td>15km/s</td><td>15km/s</td></tr>
<tr><td style="text-align: center">Photo Capture Interval</td><td>Cela permet de prendre une photo toutes les <em>x</em> secondes ou tous les <em>y</em> m√®tres. Peut √™tre d√©sactiv√© en renseignant <em>0</em>. Nous n'en avons pas besoin car les photos sont d√©j√† prises √† nos <em>waypoints</em>.</td><td>0 (Disabled)</td><td>0 (Disabled)</td></tr>
<tr><td style="text-align: center">Default Curve Size</td><td>Permet de param√©trer la courbe si <em>Path Mode</em> est <em>Curved Turns</em></td><td></td><td></td></tr>
<tr><td style="text-align: center">Default Gimbal Pitch Mode</td><td></td><td>None</td><td>None</td></tr>
<tr><td style="text-align: center">Show Discover Missions</td><td></td><td>No</td><td>No</td></tr>
<tr><td style="text-align: center">Use Online Elevation</td><td>Pour chaque <em>waypoint</em>, un param√®tre <code>Above Ground</code> peut √™tre activ√©. Quand il est activ√©, Litchi a besoin de donn√©es d'√©l√©vation du sol pour que l'altitude du drone √† chaque waypoint soit relative au sol sous ce waypoint. Il est possible d'importer des donn√©es d'√©l√©vation ou d'utiliser les donn√©es de Litchi en cochant cette option. En ne cochant ni <code>Above Ground</code> ni <code>Use Online Elevation</code>, l'altitude du vol sera relative au point de d√©part, parfait pour les zones assez plates. <a href="https://flylitchi.com/help#missionhub">Doc Litchi</a></td><td>No</td><td>No</td></tr>
</tbody></table>
</div>
<p>Une fois tout cela fait, plus qu'√† sauvegarder ! Pour cela, rendez vous dans <code>MISSIONS &gt; Save...</code> et nommez votre mission. Rappelez vous de bien utiliser la nomenclature d√©finie, comme expliqu√© dans la section <a href="guide/planification/litchi/planification.html">Planification de la mission</a>. Vos modifications ne sont pas enregistr√©es en temps r√©el. Alors si vous modifiez la mission, pensez bien √† la sauvegarder avec la m√™me proc√©dure. En conservant le m√™me nom de mission, les modifications seront enregistr√©es sans cr√©er de nouvelle mission.</p>
<h2 id="application-mobile"><a class="header" href="#application-mobile">Application Mobile</a></h2>
<p><a href="https://play.google.com/store/apps/details?id=com.aryuthere.visionplus&amp;utm_source=global_co&amp;utm_medium=prtnr&amp;utm_content=Mar2515&amp;utm_campaign=PartBadge&amp;pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1">Lien sur Google Play</a></p>
<p><a href="https://apps.apple.com/app/id1059218666?mt=8&amp;uo=4">Lien sur l'App Store</a></p>
<blockquote>
<p>Tutoriel √©crit avec la version mobile 4.26.2-g Android de Litchi Fly.
‚ö†Ô∏è Attention, l'application ne peut √™tre install√©e que sur 3 appareils simultan√©ment.</p>
</blockquote>
<p>Les missions sont automatiquement synchronis√©es et sont tout de suite accessibles depuis l'application mobile.
Pour y acc√©der, commencez par t√©l√©charger l'application et l'ouvrir.</p>
<p>Il faut commencer par changer de mode de pilotage.
Quand l'application s'ouvre, elle est par d√©faut en <strong>FPV</strong> (First Person Viewer).
Nous souhaitons passer en mode <strong>Waypoint</strong>.
Pour cela, cliquez dans l'ic√¥ne <strong>FPV</strong> en haut √† gauche de l'√©cran.</p>
<figure align="center">
    <img src="guide/planification/litchi/open_litchi.jpg" | width=600/>
    <img src="guide/planification/litchi/wp.jpg" | width=600/>
</figure>
<p>Vous pouvez voir et charger vos missions depuis l'ic√¥ne de dossier.</p>
<figure align="center">
    <img src="guide/planification/litchi/browse.jpg" | width=600/>
</figure>
<p>üèÅ Et voil√†, c'est parti pour la r√©alisation du vol !</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="r√©alisation-du-vol"><a class="header" href="#r√©alisation-du-vol">R√©alisation du vol</a></h1>
<p>La r√©alisation du vol demande de prendre en main le drone et les applications qui seront utilis√©es.
De plus, certains probl√®mes peuvent survenir.
Cette section vous aidera √† vous familiariser avec le mat√©riel et √† r√©soudre les probl√®mes list√©s si vous les rencontrez.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pr√©paration"><a class="header" href="#pr√©paration">Pr√©paration</a></h1>
<p><a href="https://dl.djicwdn.com/downloads/Mavic_Air_2/Mavic_Air_2_User_Manual_v1.6_enIII.pdf">üìë Manuel d'utilisation du Mavic Air 2</a></p>
<h2 id="pr√©paration-du-drone"><a class="header" href="#pr√©paration-du-drone">Pr√©paration du drone</a></h2>
<p>Pour ne pas perdre de temps sur le terrain, il est important de faire quelques pr√©paratifs.</p>
<ol>
<li>
<p>Prenez connaissance du <a href="https://dl.djicdn.com/downloads/Mavic_Air_2/Mavic_Air_2_User_Manual_v1.6_enIII.pdf">Manuel d'utilisation du Mavic Air 2</a>.</p>
</li>
<li>
<p>Commencez par installer l'application <strong>Litchi Fly</strong> si ce n'est pas d√©j√† fait (‚ö†Ô∏è l'application peut √™tre install√©e sur trois appareils simultan√©ment au maximum) :</p>
<ul>
<li><a href="https://play.google.com/store/apps/details?id=com.aryuthere.visionplus&amp;utm_source=global_co&amp;utm_medium=prtnr&amp;utm_content=Mar2515&amp;utm_campaign=PartBadge&amp;pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1">Lien sur Google Play</a></li>
<li><a href="https://apps.apple.com/app/id1059218666?mt=8&amp;uo=4">Lien sur l'App Store</a></li>
</ul>
</li>
<li>
<p>Installez l'application <strong>DJI</strong> qui correspond √† votre mod√®le de drone (n√©cessaire pour les mises √† jour du drone et la d√©sactivation des <em>No Flight Zone</em> dont nous parlerons plus tard).
‚ö†Ô∏è Sur Android, l'application n'est pas disponible sur le <em>Play Store</em>.
Il faut t√©l√©charger et installer un <em>apk</em> directement depuis le site de DJI.
Beaucoup de fausses applications sont disponibles sur les stores.
Apple ou Android, nous vous conseillons de t√©l√©charger les applications depuis le site de DJI :</p>
<ul>
<li><a href="https://www.dji.com/downloads/djiapp/dji-fly">DJI Fly</a> : Mavic Air 2</li>
<li><a href="https://www.dji.com/downloads/djiapp/dji-go-4">DJI Go 4</a> : Mavic Pro 1, Phantom 4</li>
</ul>
</li>
<li>
<p>Branchez votre t√©l√©phone √† la t√©l√©commande et autorisez tous les transferts de donn√©es.
√Ä un stade, votre t√©l√©phone vous proposera de toujours utiliser <code>DJI Fly</code> ou <code>Litchi FLy</code>.
Comme il faudra souvent basculer entre les deux, faites en sorte de ne pas activer cette option pour pouvoir choisir √† chaque connexion.
Allumez le drone et la t√©l√©commande en faisant, sur chacun, un clic rapide et un clic long sur le bouton <em>power</em>.
Rendez-vous maintenant dans l'application <code>DJI Fly</code>.</p>
</li>
</ol>
<figure align="center">
    <img src="guide/vol/preparation/choice.jpg" | height="450" />
    <figcaption>Ne surtout pas cocher "Se souvenir de mon choix"</figcaption>
</figure>
<ol start="5">
<li>Vous aurez peut-√™tre des calibrations √† faire, suivez les instructions de l'application.
Ensuite, rendez-vous dans le menu pour v√©rifier si des mises √† jours firmware sont disponibles en faisant :
<code>... &gt; √Ä propos &gt; Firmware de l'appareil &gt; Rechercher des mises √† jour</code></li>
</ol>
<figure align="center">
    <img src="guide/vol/preparation/menu.jpg" | width="500" />
    <img src="guide/vol/preparation/find_maj.jpg" | width="500" />
    <img src="guide/vol/preparation/maj1.jpg" | width="500" />
    <img src="guide/vol/preparation/maj2.jpg" | width="500" />
    <figcaption>√âtape pour les mises √† jours firmware</figcaption>
</figure>
<ol start="6">
<li>
<p>Fermez l'application <code>DJI Fly</code> puis ouvrez <code>Litchi Fly</code>.
(Il faut bien fermer totalement l'application et non pas la mettre seulement en fond).
V√©rifiez que votre drone se connecte bien.
Si c'est le cas, vous √™tre pr√™t pour les prochaines √©tapes !</p>
</li>
<li>
<p>Chargez toutes les batteries et la manette avant tout vol !
M√™me si le drone n'a pas √©t√© utilis√© depuis le dernier chargement, les batteries se d√©chargent lorsqu'elles sont stock√©es.</p>
</li>
</ol>
<h2 id="le-mat√©riel-pour-les-vols"><a class="header" href="#le-mat√©riel-pour-les-vols">Le mat√©riel pour les vols</a></h2>
<p>Peu de mat√©riel est √† pr√©voir en plus du drone (le mat√©riel du drone est dans sa sacoche) :</p>
<ul>
<li>üîã Batteries charg√©es.</li>
<li>üéÆ T√©l√©commande charg√©e.</li>
<li>üì± T√©l√©phone(s) charg√©(s).</li>
<li>üï∂Ô∏è Lunettes de soleil pour les op√©rateurs (surveiller le drone dans le ciel peut √™tre compliqu√© avec le soleil).</li>
<li>üï∂Ô∏è Lunettes de soleil pour le drone, ou plut√¥t, les filtres UV de la cam√©ra.
Cela √©vite que les images soient sur expos√©es et donc inutilisables.</li>
<li>Tapis de d√©collage et atterrissage si on est dans une zone poussi√©reuse (sable, terre, ...).
Cela √©vite que le sol se soul√®ve et endommage le drone.
Un tapis de voiture fait tr√®s bien l'affaire.</li>
<li>üíª Ordinateur charg√© pour r√©-ajuster les missions Litchi sur place.</li>
</ul>
<h2 id="vol-dessai"><a class="header" href="#vol-dessai">Vol d'essai</a></h2>
<p>Avant d'op√©rer le vol final, il faut que vous soyez familier avec le drone et les applications qui permettent de le contr√¥ler.
Trouvez un terrain assez d√©gag√© pour faire vos essais.
Une fois que vous connaissez le lieu de l'essai, planifiez quelques missions que vous pourrez essayer sur place.
Cela permettra de v√©rifier que vous avez bien compris les √©tapes de planification de vol et de faire un premier test avec le logiciel de reconstruction.
Vous pourrez ainsi avoir une meilleure vision de la file g√©n√©rale des op√©rations.
De plus, vous pourrez √©ventuellement d√©tecter des probl√®mes dans la prise d'image de la mission et rectifier cela pour la v√©ritable acquisition.</p>
<blockquote>
<p>üìÜ Id√©alement, celui-ci a lieu au d√©but du projet, avant la planification des vols automatiques pour la mission finale.</p>
</blockquote>
<p>Essayez les diff√©rents filtres UV pour la cam√©ra afin de vous familiariser avec leur mise en place et effet.
Prenez des photos avec chaque filtre install√©.</p>
<h3 id="vol-manuel"><a class="header" href="#vol-manuel">Vol manuel</a></h3>
<p>Commencez par faire un petit tour en vol manuel avec le drone.
Bien que les missions soient automatis√©es, il faut souvent intervenir √† la main.
Pour cela, commencez par faire d√©coller le drone en appuyant sur l'ic√¥ne correspondant dans <code>DJI Fly</code> ou <code>Litchi Fly</code>.
Le drone va s'√©lever √† 1,2m d'altitude et vous pourrez alors le contr√¥ler.
Le point de d√©collage est enregistr√© comme point de <em>Home</em> par le drone.
Il reviendra ici lorsque vous lui direz d'atterrir en mode <em>RTH (Return To Home)</em>.</p>
<figure align="center">
    <img src="guide/vol/preparation/takeoff.jpg" | width=600 />
    <figcaption>Ic√¥ne de d√©collage du drone (DJI Fly). La m√™me ic√¥ne est utilis√©e sur Litchi Fly</figcaption>
</figure>
<p>Plusieurs configurations de commandes peuvent √™tre utilis√©es pour les joysticks.
Ils peuvent √™tre chang√©s dans <code>DJI Fly</code>.
Trois modes pr√©-configur√©s existent (cf. p32 <a href="https://dl.djicwdn.com/downloads/Mavic_Air_2/Mavic_Air_2_User_Manual_v1.6_enIII.pdf">Manuel d'utilisation du Mavic Air 2</a>).
Voici le mode utilis√© pour le drone <a href="https://www.dji.com/mavic-air-2/specs">Mavic Air 2</a> de <a href="https://www.mitsiomotu.com/">Mitsio Motu</a> :</p>
<figure align="center">
    <img src="guide/vol/preparation/commands.jpg" | width=600 />
    <figcaption>Commandes des joysticks (Mode 2)</figcaption>
</figure>
<p>√Ä l'arri√®re de la t√©l√©commandes, des boutons sont disponibles pour g√©rer la partie cam√©ra, photos et vid√©os :</p>
<figure align="center">
    <img src="guide/vol/preparation/other_commands.jpg" | width=600 />
    <figcaption>Inclinaison cam√©ra, prise de photos et vid√©os</figcaption>
</figure>
<p>Amusez-vous, c'est l'occasion de prendre de jolies photos ! üì∏</p>
<h3 id="vols-automatiques"><a class="header" href="#vols-automatiques">Vols automatiques</a></h3>
<p>C'est le moment de tester les vols que vous avez pr√©par√©s pour cette session d'essai.</p>
<figure align="center">
    <img src="guide/vol/preparation/anac_hor.jpg" | width=600 />
    <img src="guide/vol/preparation/anac_vert.jpg" | width=600 />
    <figcaption>Exemples de mission de test en terrain d√©gag√©</figcaption>
</figure>
<p>Rendez vous dans la section <code>Waypoint</code> dans l'application et chargez votre mission.<sup class="footnote-reference"><a href="#rappel">1</a></sup>
R√©glez ensuite le degr√© de la cam√©ra √† celui souhait√© pour la mission gr√¢ce √† la roulette en haut √† gauche de la manette.
Vous pouvez voir √† quel degr√© exactement la cam√©ra est inclin√©e, comme illustr√© dans l'image ci-dessous :</p>
<figure align="center">
    <img src="guide/vol/preparation/degree.jpg" | width=600 />
    <figcaption>R√©glage de l'inclinaison de la cam√©ra</figcaption>
</figure>
<p>V√©rifiez que le format de capture des photos.
Le drone <a href="https://www.dji.com/mavic-air-2/specs">Mavic Air 2</a>
peut enregistrer les images en <a href="https://fr.wikipedia.org/wiki/JPEG">JPEG</a>
uniquement ou en <a href="https://fr.wikipedia.org/wiki/JPEG">JPEG</a> +
<a href="https://fr.wikipedia.org/wiki/RAW_(format_d%27image)">RAW</a>.
Le format RAW est tr√®s adapt√© pour retoucher les images mais est beaucoup plus lourd que le format JPEG.
Si l'on ne souhaite pas retoucher les images, il n'est pas n√©cessaire de les enregistrer dans ce format.
Pour la reconstruction 3D ce format n'est pas forc√©ment n√©cessaire.</p>
<figure align="center">
    <img src="guide/vol/preparation/format.jpg" | width=600 />
    <figcaption>R√©glage du format d'enregistrement des photos</figcaption>
</figure>
<p>Assurez vous que les images sont bien enregistr√©es sur la m√©moire externe et non interne du drone (avec 8Go, elle sera vite satur√©e, encore plus si vous enregistrez les fichiers RAW).
Pour cela, rendez-vous dans les param√®tres : <code>... &gt; Cam√©ra &gt; Emplacement de stockage</code>.</p>
<figure align="center">
    <img src="guide/vol/preparation/disk.jpg" | width=600 />
    <figcaption>Choix de l'emplacement de stockage</figcaption>
</figure>
<p>Lancez ensuite simplement le vol en cliquant sur <code>Play</code>.</p>
<figure align="center">
    <img src="guide/vol/preparation/start_lf.jpg" | width=600 />
    <figcaption>D√©marrage d'une mission Litchi Fly</figcaption>
</figure>
<p>C'est parti !
Plus qu'√† laisser le drone faire son travail.
V√©rifiez tout de m√™me qu'il effectue bien ce qui est pr√©vu et que √ßa correspond √† ce que vous souhaitiez.
Vous perdez alors tout le contr√¥le du drone par les joysticks.
Cependant, vous pouvez emp√™cher le drone de foncer dans un mur en cliquant sur les boutons <code>pause ‚è∏Ô∏è</code> ou <code>stop ‚èπÔ∏è</code> :</p>
<ul>
<li>
<p><code>pause ‚è∏Ô∏è</code> :
Les joysticks n'ont toujours pas d'effet.
Le drone ne peut pas √™tre d√©plac√©.
Vous pouvez cependant rectifier le <em>heading</em> du drone en faisant glisser votre doigt sur l'image sur votre t√©l√©phone.
Cependant, cette solution n'est pas tr√®s pr√©cise.
La mission continue depuis ce point quand vous appuyez sur <code>play ‚ñ∂Ô∏èÔ∏è</code>.</p>
<p>Ce bouton est tr√®s utile d√®s que vous avez un doute sur une potentielle collision du drone.
D√®s que vous avez un doute, utilisez le.
Vous aurez alors le temps de v√©rifier si le drone peut continuer ou non.</p>
</li>
<li>
<p><code>stop ‚èπÔ∏è</code> :
La mission est arr√™t√©e.
Vous reprenez tout le contr√¥le du drone.
Quand vous √™tes s√ªr que vous allez rencontrer un obstacle, il faut appuyer sur ce bouton.
Vous pouvez alors contourner manuellement l'obstacle.
Ensuite, relancez la mission au <em>waypoint</em> le plus proche et s√©curitaire, apr√®s l'obstacle.
Comme Litchi n'indique pas √† quel <em>waypoint</em> de la mission se trouve le drone, ce sera √† vous d'estimer √† quel <em>waypoint</em> reprendre la mission.</p>
</li>
</ul>
<h2 id="reconnaissance-sur-le-terrain"><a class="header" href="#reconnaissance-sur-le-terrain">Reconnaissance sur le terrain</a></h2>
<p>La reconnaissance sur le terrain est elle aussi importante.
Elle permet d'identifier certains probl√®mes potentiels et de mieux comprendre l'organisation de l'environnement.
Par exemple, √† l'H√¥tel de la Paix, nous avons constat√© qu'il y avait de nombreux palmiers proches des fa√ßades.
En plus d'√™tre probl√©matiques pour la prise d'images et la reconstruction, cela augmente les risques de collision.</p>
<blockquote>
<p>üìÜ Id√©alement, la reconnaissance a lieu avant (ou au d√©but) de la planification des missions automatiques.</p>
</blockquote>
<p>C'est √©galement l'occasion de faire des relev√©s de hauteur de b√¢timent si n√©cessaire.
La m√©thode √† suivre est renseign√©e dans la partie <a href="guide/vol/preparation/../planification/planification.html#le-toit">Planification de la mission, section <strong>Le toit</strong></a>.</p>
<p>Si l'occasion se pr√©sente, il peut √™tre int√©ressant de pr√©voir un premier survol tr√®s grossier de la zone.
Vous pouvez pour cela pr√©voir une mission en grille crois√©e, cam√©ra √† 45¬∞ en altitude assez haute (&gt;40m).</p>
<hr />
<div class="footnote-definition" id="rappel"><sup class="footnote-definition-label">1</sup>
<p>Voir la partie <a href="guide/vol/preparation/../planification/litchi.html#application-mobile">Importation sur Litchi Fly, section <strong>Application mobile</strong></a> pour voir comment faire.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="r√©alisation"><a class="header" href="#r√©alisation">R√©alisation</a></h1>
<blockquote>
<p>Il est indispensable d'avoir pris connaissance de la partie <a href="guide/vol/realisation/preparation.html">Pr√©paration</a> avant de lire cette section et d'op√©rer le vol final.
Cette derni√®re pr√©sente de nombreux points √† conna√Ætre sur les applications et le pilotage du drone.
Toutes ces √©tapes de pr√©paration doivent √™tre suivies le jour J.</p>
</blockquote>
<p>L'acquisition des images est une √©tape concr√®te et importante.
Alors c'est parti ! üí™</p>
<p>Pour le jour J, assurez vous que toutes vos batteries sont charg√©es √† bloc.
La liste du mat√©riel √† emporter est la m√™me que pr√©sent√©e dans <a href="guide/vol/realisation/preparation.html#le-mat%C3%A9riel-pour-les-vols">Pr√©paration, section <strong>Le mat√©riel pour les vols</strong></a>.
Vous pouvez √©ventuellement y ajouter une liste imprim√©e de tous les vols √† effectuer pour suivre l'avancement de la journ√©e.</p>
<figure align="center">
    <img src="guide/vol/realisation/suivi.jpg" | width="600" />
    <figcaption>Fiche de suivi pour les vols √† l'H√¥tel de la Paix</figcaption>
</figure>
<p>Nous avons d√©j√† parl√© dans la partie <a href="guide/vol/realisation/preparation.html">Pr√©paration</a> de tout ce qui est relatif au pilotage du drone et au lancement des missions.
Nous pr√©senterons ici des probl√©matiques sp√©cifiques que vous pourrez rencontrer le jour J.</p>
<h2 id="no-flight-zone"><a class="header" href="#no-flight-zone">No flight zone</a></h2>
<p>Si vous vous trouvez dans une zone consid√©r√©e comme une <em>No flight zone</em> (vers un a√©roport par exemple), le drone ne d√©collera pas.
Vous pouvez cependant forcer le d√©collage.</p>
<p>Pour cela, rendez-vous dans l'application <code>DJI Fly</code> (ou autre application DJI/constructeur correspondant √† votre mod√®le de drone) :</p>
<ul>
<li><code>DJI Fly</code> :
<ul>
<li>Faites d√©coller le drone. Il va s'√©lever √† 1,2m.</li>
<li>Alors, l'application vous dira qu'il ne peut pas d√©coller (oui, oui, alors que le drone a d√©j√† d√©coll√©).</li>
<li>Acceptez toutes les conditions pour vous porter garant en cas d'incident.
Une v√©rification d'identit√© peut-√™tre demand√©e. Suivez les instructions si c'est le cas.</li>
</ul>
</li>
<li><code>DJI Go 4</code> :
<ul>
<li>Appuyez sur le bouton de d√©collage du drone.</li>
<li>Il va refuser de d√©coller en vous expliquant la raison dans un pop-up.</li>
<li>Tout en bas du pop-up, vous pouvez cocher deux cases pour vous porter garant √©galement en cas d'incident.</li>
<li>Validez tout en bas du pop-up.</li>
<li>‚ö†Ô∏è Dans la version Android 4.3.54 de <code>DJI Go 4</code>, un bug fait qu'on ne peut pas d√©rouler le pop-up et donc jamais acc√©der au bouton <code>valider</code>.
Nous n'avons pas trouv√© d'autre solution que de passer sur un autre t√©l√©phone avec un √©cran plus large.
Sur l'un des t√©l√©phones, une erreur se produit √©galement en validant.
Nous avons √† nouveau d√ª changer de t√©l√©phone pour r√©ussir cette √©tape.</li>
</ul>
</li>
</ul>
<p>Fermez alors l'application <code>DJI</code> et ouvrez <code>Litchi Fly</code>.
Vous devez pouvoir d√©coller.</p>
<blockquote>
<p>‚û°Ô∏è Cette √©tape doit √™tre r√©p√©t√©e √† chaque d√©marrage du drone.</p>
</blockquote>
<h2 id="murs--surfaces-verticales"><a class="header" href="#murs--surfaces-verticales">Murs &amp; surfaces verticales</a></h2>
<p>Si vous faites un vol vertical, il est probable que vous ayez r√©gl√© le <em>heading</em> du drone en <em>Initial</em>.
Dans ce cas, assurez-vous que la position de d√©part au sol du drone est bien perpendiculaire √† la fa√ßade acquise et avec la cam√©ra en direction de ce mur.
N'oubliez pas de r√©gler la cam√©ra √† 90¬∞ avant de d√©coller.</p>
<p>Vous pouvez r√©-ajuster le heading au cour de la mission en cliquant sur <code>pause ‚è∏Ô∏è</code>, comme expliqu√© dans <a href="guide/vol/realisation/preparation.html#vols-automatiques">la section <strong>Vols automatiques</strong> de Pr√©paration</a>.</p>
<p>Lorsque vous arrivez vers le haut du b√¢timent, il est possible qu'une grande partie de l'image soit compos√©e de ciel.
Ceci ne nous int√©resse pas.
Dans ce cas, mettez la mission en <code>pause ‚è∏Ô∏è</code> et inclinez un peu la cam√©ra vers le bas.
Reprenez la mission quand vous √™tes satisfait.
Vous pouvez √©galement le faire sur les lignes de vol suivantes.</p>
<h2 id="obstacles-et-capteurs"><a class="header" href="#obstacles-et-capteurs">Obstacles et capteurs</a></h2>
<p>Le drone poss√®de des capteurs pour d√©tecter les obstacles.
Sur le <a href="https://www.dji.com/mavic-air-2/specs">Mavic Air 2</a>, ils sont situ√©s √† l'avant et √† l'arri√®re seulement.
Si le drone d√©tecte un objet trop proche de lui, m√™me s'il est en mission, il s'arr√™tera.
Dans ce cas, suivez la proc√©dure du bouton <code>stop ‚èπÔ∏è</code>, comme expliqu√© dans <a href="guide/vol/realisation/preparation.html#vols-automatiques">la section <strong>Vols automatiques</strong> de Pr√©paration</a>.</p>
<p>‚ö†Ô∏è Le <a href="https://www.dji.com/mavic-air-2/specs">Mavic Air 2</a> n'a cependant <strong>pas de capteurs sur les c√¥t√©s</strong>.
Il faudra √™tre tr√®s vigilant lors des vols lat√©raux (utilis√©s pour les vols verticaux par exemple).
Si vous avec le moindre doute, appuyez sur le bouton <code>pause ‚è∏Ô∏è</code>, rapprochez vous pour mieux √©valuer la situation et prendre votre d√©cision.</p>
<h2 id="gestion-de-la-batterie"><a class="header" href="#gestion-de-la-batterie">Gestion de la batterie</a></h2>
<p>Une fois connect√© au drone avec <code>Litchi Fly</code>, vous pourrez suivre l'√©tat de la batterie de votre drone gr√¢ce √† la barre d'√©tat en haut de l'√©cran.
Quand il atteindra <strong>20%</strong> de batterie restante, il vous demandera l'autorisation de rentrer afin que la batterie soit chang√©e.
Vous pouvez accepter ou continuer la mission (parfois, il est si proche qu'il n'est pas n√©cessaire qu'il rentre tout de suite).
‚ö†Ô∏è Attention cependant, veillez √† le faire tout de m√™me rentrer avant qu'il atteigne <strong>10%</strong> sinon il fera un atterrissage forc√© l√† o√π il se trouve.
Cela peut √™tre tr√®s probl√©matique si vous vous trouvez au dessus d'un toit ou un arbre par exemple.
Si jamais cela arrivait, sachez que vous pouvez tout de m√™me le d√©caler droite/gauche et avant/arri√®re avec les joysticks mais nous n'avez pas de contr√¥le haut/bas.
Il faut donc √™tre attentif et r√©actif si cela arrive.</p>
<p>Dans tous les cas, une fois que votre drone est revenu, changez sa batterie.</p>
<p>La mission a √©t√© interrompue.
Quand vous relancez la mission, vous avez le choix du <em>waypoint</em> o√π commencer.
Malheureusement, <code>Litchi Fly</code> au cours d'une mission n'indique pas le <em>waypoint</em> o√π il se situe.
Ce sera donc √† vous d'estimer l√† o√π vous en √©tiez.</p>
<h2 id="erreurs-litchi--invalid-3d-path"><a class="header" href="#erreurs-litchi--invalid-3d-path">Erreurs Litchi : &quot;Invalid 3D path&quot;</a></h2>
<p>En lan√ßant la mission, il est possible que vous rencontriez une erreur similaire √† <code>Invalid 3D path between waypoints 30 and 31</code>.
Il semblerait que cette erreur se produise quand deux <em>waypoints</em> sont trop proches, dans cet exemple, les points n¬∞30 et 31.</p>
<p>Dans ce cas, rendez-vous sur <code>Litchi Fly</code> (sur PC ou directement sur l'application t√©l√©phone).
Supprimez le premier des points list√© (ici le point n¬∞30).
Sauvegardez et synchronisez bien les appareils si vous avez √©dit√© la mission sur l'ordinateur.
Relancez la mission et recommencez l'op√©ration si n√©cessaire jusqu'√† ce que la mission fonctionne.</p>
<blockquote>
<p>üí° <strong>Tip</strong> : Si cela se produit sur une mission verticale, l'erreur va appara√Ætre √† chaque ligne de vol.
Au lieu de supprimer un point et relancer la mission √† chaque fois, vous pouvez identifier les <em>waypoints</em> probl√©matiques sur toutes les lignes, tous les supprimer et sauvegarder/synchroniser une fois qu'ils sont tous faits.</p>
</blockquote>
<h2 id="mission-mal-plac√©e"><a class="header" href="#mission-mal-plac√©e">Mission mal plac√©e</a></h2>
<p>Planifier ses missions sur des images satellites de mauvaise qualit√© fait qu'il est impossible d'avoir une bonne pr√©cision dans le placement de la mission.
Il est tr√®s probable que vous vous rendiez compte sur le terrain que votre mission n'est pas plac√©e exactement l√† o√π vous le voudriez.</p>
<p>Pour r√©soudre cela, rendez-vous sur <code>Litchi Fly</code> sur ordinateur (cette modification n'est √† l'heure actuelle pas possible sur t√©l√©phone).
D√©placez tous les points de la mission dans le sens souhait√©.
Sauvegardez et synchronisez bien le t√©l√©phone.
Lancez la mission, voyez si c'est mieux ou s'il faut encore l'√©diter.
Dans ce cas, recommencez jusqu'√† ce que la position soit satisfaisante.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reconstruction"><a class="header" href="#reconstruction">Reconstruction</a></h1>
<p>Pour la reconstruction des images en 3D, nous utilisons <a href="https://opendronemap.org/">Open Drone Map (ODM)</a>, un logiciel Open Source et gratuit.
Seul l'installeur Windows est payant si l'on ne veut pas faire l'installation nous m√™me.
Jusqu'ici, nous avons utilis√© ODM sur Linux.
Le d√©p√¥t GitHub est disponible <a href="https://github.com/OpenDroneMap/ODM">ici</a>.</p>
<p>Avant de reconstruire, nous recommandons de passer rapidement sur l'ensemble des images afin de supprimer celles  qui ne sont pas exploitables.
Cela permet d'√©viter des erreurs lors de la reconstruction et de gagner du temps.
Cela comprend les images:</p>
<ul>
<li>qui sont floues,</li>
<li>qui sont trop sombres,</li>
<li>qui sont trop claires,</li>
<li>qui font un gros plan sur un palmier ! üå¥</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="quelques-notions-de-photogramm√©trie"><a class="header" href="#quelques-notions-de-photogramm√©trie">Quelques notions de photogramm√©trie</a></h1>
<blockquote>
<p>Cette section permet simplement d'introduire la notion de <a href="https://fr.wikipedia.org/wiki/Photogramm%C3%A9trie">photogramm√©trie</a>. Le lecteur est encourag√© √† faire des recherches sur ce sujet par lui m√™me. Beaucoup de ressources, plus compl√®tes, existent √† ce sujet.</p>
</blockquote>
<p>D'apr√®s une d√©finition d'<a href="https://www.ign.fr/institut/kiosque/la-photogrammetrie#:~:text=La%20photogramm%C3%A9trie%20est%20une%20technique,vues%20photographiques%20de%20cet%20objet.">IGN France</a>, <code>&quot;La photogramm√©trie est une technique de mesure qui consiste √† d√©terminer la forme, les dimensions et la situation d‚Äôun objet dans l‚Äôespace √† partir de plusieurs prises de vues photographiques de cet objet.&quot;</code>.</p>
<p>Le fonctionnement repose sur la <a href="https://fr.wikipedia.org/wiki/St%C3%A9r%C3%A9oscopie">st√©r√©oscopie</a>, principe qui reprend la vision humaine : obtenir une images en 3 dimensions √† partir de deux images en 2 dimensions.
Pour l'humain, c'est le cerveau qui traite les deux images que nous voyons, une par oeil, pour en obtenir une en 3D.
La st√©reoscopie est une m√©thode ancienne, apparue bien avant l'informatique et m√™me avant la photographie.
Le m√™me principe est utilis√© au cin√©ma avec des projections de films en 3D.</p>
<figure align="center">
    <img src="guide/reconstruction/photogrammetrie/holmes-stereoscope.jpg" | width=500/>
    <figcaption>St√©reoscope de Holmes</figcaption>
</figure>
<p>Aujourd'hui, il est possible avec un ordinateur de simuler les m√™mes calculs que fait notre cerveau pour que lui aussi puisse obtenir des images 3D √† partir d'images 2D. C'est gr√¢ce √† cela que nous pourrons r√©aliser une reconstruction 3D √† partir d'images 2D. Nous allons pr√©senter les √©tapes principales d'une reconstruction 3D.</p>
<blockquote>
<p>üìñ Nous vous conseillons vivement d'aller lire des sources plus compl√®tes sur le sujet. Voici quelques exemples :</p>
<ul>
<li>L'article <a href="https://medium.com/data-breach/introduction-to-feature-detection-and-matching-65e27179885d">Introduction To Feature Detection And Matching</a>
est une bonne base pour comprendre les √©tapes de la d√©tection au matching.</li>
<li>Le livre d'Open Drone Map <a href="https://odmbook.com/">A Comprehensive Guide To Use OpenDroneMap</a>
explique toute la file de reconstruction, de mani√®re simple et claire.</li>
</ul>
</blockquote>
<h2 id="d√©tection-de-points-dint√©r√™t-ou-features"><a class="header" href="#d√©tection-de-points-dint√©r√™t-ou-features">D√©tection de points d'int√©r√™t ou <em>features</em></a></h2>
<p>Pour commencer, il est n√©cessaire de d√©tecter dans chaque image ce que l'on appelle des points d'int√©r√™t ou <em>features</em> en anglais. Mais qu'est-ce que c'est ?</p>
<p>Ce sont des points dans l'image dont l'information environnante est suffisament sp√©cifique pour qu'ils soient reconnus dans diff√©rentes images. Plus concr√®tement, il va s'agir par exemple du :</p>
<ul>
<li>coin d'un meuble,</li>
<li>pic d'une montagne,</li>
<li>angles d'un b√¢timents,</li>
<li>bord d'un oeil,</li>
<li>...</li>
</ul>
<p>Diff√©rents algorithmes existent pour la d√©tection de points d'int√©r√™t, chacun ayant ses particularit√©s. <a href="https://opendronemap.org/">Open Drone Map</a>, que nous utiliserons pour la reconstruction, utilise <a href="https://en.wikipedia.org/wiki/Scale-invariant_feature_transform">SIFT</a> par exemple.</p>
<figure align="center">
    <img src="guide/reconstruction/photogrammetrie/cars.png" | width=600/>
    <figcaption>D√©tection de points d'int√©r√™t - Algorithme d'<a href="https://en.wikipedia.org/wiki/Harris_corner_detector">Harris</a></figcaption>
</figure>
<p>On peut voir dans cette images que les points d√©tect√©s sont en effet plac√©s l√† ou ils pourront √™tre reconnus :</p>
<ul>
<li>angles de pare brise,</li>
<li>angles des camions,</li>
<li>r√©troviseurs,</li>
<li>...</li>
</ul>
<h2 id="description-des-points"><a class="header" href="#description-des-points">Description des points</a></h2>
<p>Pour pouvoir identifier chaque point, nous avons besoin d'utiliser un descripteur. Ce dernier va, comme son nom l'indique, d√©crire le point. En langage humain, une descriptions pourrait ressembler √† : &quot;Le point est un angle marron, entour√© d'un peu de rouge et de points verts&quot;. L'ordinateur va plut√¥t utiliser des nombres pour caract√©riser toutes les informations du point, lui cr√©ant ainsi une identit√©.</p>
<h2 id="association-des-points-entre-eux-ou-matching"><a class="header" href="#association-des-points-entre-eux-ou-matching">Association des points entre eux ou <em>matching</em></a></h2>
<p>L'information de profondeur s'obtient en ayant un m√™me point sur plusieurs images dont le point de vue est diff√©rent. Pour faire cela, il faut trouver pour chaque point, toutes les images sur lesquelles il est pr√©sent. Gr√¢ce √† la phase de description, nous allons pouvoir v√©rifier la ressemblance de tous les points de chaque image avec les points des autres images.</p>
<p>L'image ci-dessous illustre un r√©sultat de matching entre deux images.</p>
<figure align="center">
    <img src="guide/reconstruction/photogrammetrie/matching.jpg" | width=600/>
    <figcaption>R√©sultat de matching - Image issue de cet <a href="https://medium.com/data-breach/introduction-to-feature-detection-and-matching-65e27179885d">article</a></figcaption>
</figure>
<h2 id="meshing"><a class="header" href="#meshing">Meshing</a></h2>
<p>Une fois l'association des points d'int√©r√™t faite, un nuage de points 3D peut √™tre g√©n√©r√©. Ensuite, un algorithme de meshing est appliqu√© pour obtenir une surface. Ce dernier va g√©n√©rer des triangles entres les points du mod√®le 3D, qui constitueront la surface. Le nombre de triangles peut √™tre param√©tr√©. Plus il y en a, meilleure la r√©solution sera (et r√©ciproquement).</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Nuage de points</th><th style="text-align: center">Mesh</th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="guide/reconstruction/photogrammetrie/bunny_pc.jpg" alt="Bunny point cloud" /></td><td style="text-align: center"><img src="guide/reconstruction/photogrammetrie/bunny_meshed.jpg" alt="Bunny mesh" /></td></tr>
</tbody></table>
</div>
<h2 id="texturing"><a class="header" href="#texturing">Texturing</a></h2>
<p>Cette √©tape permet d'appliquer de la couleur au mod√®le afin de le rendre plus r√©aliste. Comme dit dans <a href="https://odmbook.com/">A Comprehensive Guide To Use OpenDroneMap</a>, √† cette √©tape nous n'avons qu'une <code>&quot;soupe de polygones&quot;</code>.</p>
<p>Pour donner de la couleur et texture √† notre mod√®le, on cr√©e un patchwork √† partir des images utilis√©es pour la reconstruction. Puis, on vient &quot;plaquer&quot; ce dernier sur le mesh.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Texture</th><th style="text-align: center">Mesh textur√©</th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="guide/reconstruction/photogrammetrie/bunny_texture.jpg" alt="Bunny texture" /></td><td style="text-align: center"><img src="guide/reconstruction/photogrammetrie/bunny_textured.jpg" alt="Bunny textured" /></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="open-drone-map"><a class="header" href="#open-drone-map">Open Drone Map</a></h1>
<ul>
<li><a href="https://opendronemap.org/"><strong>Site d'OpenDroneMap</strong></a></li>
<li><a href="https://docs.opendronemap.org/"><strong>Documentation d'OpenDroneMap</strong></a></li>
<li><a href="https://community.opendronemap.org/"><strong>D√©p√¥t d'OpenDroneMap</strong></a></li>
<li><a href="https://github.com/OpenDroneMap/ODM"><strong>Forum d'OpenDroneMap</strong></a></li>
</ul>
<p>OpenDroneMap est une palette d'outils de photogramm√©trie open source permettant de transformer des images a√©riennes (g√©n√©ralement prises par un drone) en cartes et en mod√®les 3D. Le logiciel est h√©berg√© et distribu√© gratuitement sur GitHub.</p>
<p>Il est int√©ressant de faire la diff√©rence entre ODM et WebODM:</p>
<ul>
<li>
<p><a href="https://github.com/OpenDroneMap/ODM">ODM</a> est le projet initial d'OpenDroneMap. C'est lui qui s'occupe de tout le travail de traitement et d'analyse des images jusqu'√† la g√©n√©ration du mod√®le 3D. C'est un outil en lignes de commandes.</p>
</li>
<li>
<p><a href="https://github.com/OpenDroneMap/WebODM">WebODM</a> est une interface web permettant d'utiliser ODM plus facilement, √† travers une interface graphique.</p>
</li>
</ul>
<p>Nous utilisons ici OpenDroneMap afin de g√©n√©rer le mod√®le 3D de l'H√¥tel de la Paix. L'utiliser en lignes de commandes nous permet de param√©trer les diff√©rentes options plus facilement. Elles sont cependant presque toutes disponibles √©galement avec WebODM.</p>
<p>OpenDroneMap peut √™tre utilis√© dans diff√©rents buts :</p>
<ul>
<li>Surveillance des cultures.</li>
<li>Cartographier des zones terrestres.</li>
<li>Effectuer des analyses hydrologiques.</li>
<li>Rendre compte de l'avancement des travaux de construction.</li>
<li>Classer et compter les arbres.</li>
<li>...</li>
</ul>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<p>Voir la <a href="https://docs.opendronemap.org/installation/">documentation d'Open Drone Map</a> qui est tr√®s claire.</p>
<p>Dans notre cas, nous avons utilis√© la version Docker comme recommand√© dans la documentation.</p>
<p>Dans la suite de ce document, nous montrerons les commandes avec Docker.</p>
<h2 id="utilisation"><a class="header" href="#utilisation">Utilisation</a></h2>
<blockquote>
<p>Nous expliquons ici l'utilisation d'OpenDroneMap. Sachez cependant qu'elle est plus d√©taill√©e dans le <strong>README</strong> du <a href="https://github.com/OpenDroneMap/ODM#readme">d√©p√¥t d'OpenDroneMap</a>.</p>
</blockquote>
<p>Pour une structure de fichiers comme ceci :</p>
<pre><code class="language-plaintext">my_datasets
‚îú‚îÄ‚îÄ mission_1
‚îÇ   ‚îú‚îÄ‚îÄ images
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ img_1.jpg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ img_2.jpg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ img_n.jpg
‚îú‚îÄ‚îÄ mission_2
‚îú‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ mission_n
</code></pre>
<blockquote>
<p>‚ö†Ô∏è Les images doivent <strong>obligatoirement</strong> √™tre dans un dossier <code>images</code> √† la racine de la mission.</p>
</blockquote>
<p>Pour reconstruire la mission 1, il faut lancer la commande suivante (apr√®s avoir lanc√© de <em>docker daemon</em>):</p>
<pre><code class="language-bash">docker run -ti --rm -v &lt;chemin_vers&gt;/my_datasets:/datasets opendronemap/odm --project-path /datasets mission_1
</code></pre>
<h2 id="gpu"><a class="header" href="#gpu">GPU</a></h2>
<p>Afin d'acc√©l√©rer le processus de reconstruction, il est possible d'utiliser le GPU de la machine, si elle en poss√®de un.
Pour cela, il faut ajouter l'option <code>--gpus all</code> √† la commande et utiliser l'image Docker <code>opendronemap/odm:gpu</code>.</p>
<pre><code class="language-bash">docker run -ti --rm -v &lt;chemin_vers&gt;/my_datasets:/datasets --gpus all opendronemap/odm:gpu --project-path /datasets mission_1
                                                           ^^^^^^^^^^                 ^^^^
</code></pre>
<blockquote>
<p>‚ö†Ô∏è D'apr√®s @Saijin_Naib, Community Support sur le <a href="https://community.opendronemap.org/">forum OpenDroneMap</a> et contributeur de <a href="https://github.com/OpenDroneMap/ODM">OpenDroneMap/ODM</a>, la <a href="https://community.opendronemap.org/t/post-processing-after-odm/16314/5?u=adrien-anton-ludwig">d√©tection et l'extraction des points d'int√©r√™ts est bien plus robuste sur CPU</a>.</p>
</blockquote>
<h2 id="processus-de-reconstruction-recommand√©"><a class="header" href="#processus-de-reconstruction-recommand√©">Processus de reconstruction recommand√©</a></h2>
<p>Deux options s'offrent √† nous :</p>
<ol>
<li>Reconstruire chaque mission s√©par√©ment et fusionner les nuages de points.</li>
<li>Reconstruire l'ensemble des missions en m√™me temps.</li>
</ol>
<p>Avantages et inconv√©nients de chaque m√©thode :</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">M√©thode</th><th style="text-align: center">Avantages</th><th style="text-align: center">Inconv√©nients</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">- Plus facile √† mettre en place. <br> - Plus facile √† corriger en cas d'erreur. <br> - N√©cessite moins de RAM.</td><td style="text-align: center">- Compliqu√© de recaler toutes les sections ensemble. <br> - Comment fusionner et retirer les erreurs ?</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">- Meilleure robustesse (en th√©orie). <br> - Pas de recalage √† faire. <br> - Reconstruit mieux les alentours car pas de mission sp√©cifique mais un peu de chaque mission.</td><td style="text-align: center">- Plus difficile √† corriger en cas d'erreur. <br> - Possibilit√© d'introduire des erreurs avec les impr√©cisions qui se multiplient sur le dataset g√©n√©ral. <br> - En fonction du nombre d'images, peut n√©cessiter beaucoup de RAM.</td></tr>
</tbody></table>
</div>
<p>Dans tous les cas, nous recommandons de commencer par reconstruire chaque mission s√©par√©ment, m√™me vous souhaitez reconstruire l'ensemble des missions par la suite.
En effet, il est plus facile de corriger les erreurs sur une mission que sur l'ensemble des missions.</p>
<blockquote>
<p>Il n'y a pas de r√©ponse universelle quant √† la m√©thode √† utiliser. Ces choix vont aussi d√©pendre du projet et de l'acquisition des images.</p>
</blockquote>
<h2 id="erreurs-rencontr√©es"><a class="header" href="#erreurs-rencontr√©es">Erreurs rencontr√©es</a></h2>
<p>Nous avons rencontr√© 2 erreurs majeures lors de la reconstruction des missions.</p>
<h3 id="coordonn√©es-gps-aberrantes"><a class="header" href="#coordonn√©es-gps-aberrantes">Coordonn√©es GPS aberrantes</a></h3>
<p>Certaines images pr√©sentaient des coordonn√©es GPS aberrantes.
Cela peut √™tre d√ª √† une mauvaise r√©ception GPS au moment de la prise de vue.</p>
<p>Voici un exemple de reconstruction avec des coordonn√©es GPS aberrantes par rapport √† la m√™me reconstruction sans ces images.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Avec les images aberrantes</th><th style="text-align: center">Sans les images aberrantes</th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="guide/reconstruction/open_drone_map/with_gps_aberrant_images.jpg" alt="Avec les images aberrantes" /></td><td style="text-align: center"><img src="guide/reconstruction/open_drone_map/without_gps_aberrant_images.jpg" alt="Sans les images aberrantes" /></td></tr>
</tbody></table>
</div>
<p>Pour trouver les images aberrantes, on peut utiliser <a href="https://www.qgis.org/fr/site/">QGIS</a>.
Pour cela, il faut utiliser la fonction <code>Import GeoTagged Photos</code> et s√©lectionner le dossier contenant les images.</p>
<p>Certaines aberrations sont visibles √† l'≈ìil nu.
Par exemple, sur la figure ci-dessous, nous savons que toutes les images devraient √™tre localis√©es dans la zone verte.
On peut donc identifier les images aberrantes.</p>
<p><img src="guide/reconstruction/open_drone_map/qgis_gps_aberrant.jpg" alt="QGIS_GPS_aberrant" /></p>
<p>D'autres aberrations sont moins visibles, comme des images <strong>non localis√©es</strong> ou <strong>mal localis√©es</strong>.</p>
<p>Pour les images mal localis√©es, il est possible de les mettre en √©vidence en utilisant la fonction <code>Zoom to Layer Extent</code> sur la couche <code>Photos</code>.</p>
<p>Les images non localis√©es n'apparaissent pas sur la carte.
On peut les trouver en s√©lectionnant toutes les images visibles sur la cartes et en inversant la s√©lection.</p>
<blockquote>
<p>‚ö†Ô∏è FIXME ‚ö†Ô∏è
Il faudrait encore explorer la possibilit√© de reconstruire sans utiliser les coordonn√©es GPS des images.</p>
</blockquote>
<h3 id="images-non-exploitables"><a class="header" href="#images-non-exploitables">Images non exploitables</a></h3>
<p>Comme √©voqu√© sur la page pr√©c√©dente, nous recommandons de supprimer les images qui ne sont pas exploitables.</p>
<p>Voici un exemple d'images que nous avons oubli√© de supprimer et qui ont g√©n√©r√© une erreur lors de la reconstruction.</p>
<p><img src="guide/reconstruction/open_drone_map/palm_tree.jpg" alt="Palmier" /></p>
<h2 id="param√®tres-explor√©s"><a class="header" href="#param√®tres-explor√©s">Param√®tres explor√©s</a></h2>
<p>Les param√®tres √† utiliser varient beaucoup d'une mission √† l'autre.</p>
<p>Nous allons nous int√©resser aux param√®tres que nous avons explor√©s, lors de notre projet.</p>
<p>N'h√©sitez pas √† explorer l'ensemble des param√®tres dans <a href="https://docs.opendronemap.org/arguments/">la documentation d'ODM</a>.
Nous recommandons √©galement vivement le livre <a href="https://odmbook.com/">OpenDroneMap: The Missing Guide</a>, nous ayant aid√© √† comprendre beaucoup de points sur le fonctionnement d'OpenDroneMap.</p>
<p>Nous remercions la <a href="https://community.opendronemap.org/">communaut√© d'OpenDroneMap</a> pour <a href="https://community.opendronemap.org/t/post-processing-after-odm/16314?u=adrien-anton-ludwig">leur aide sur le forum</a> qui nous a guid√© dans nos choix.</p>
<h3 id="mesh-size"><a class="header" href="#mesh-size"><code>mesh-size</code></a></h3>
<p>OpenDroneMap offre la possibilit√© de limiter la taille du maillage g√©n√©r√©, afin de r√©duire la taille du fichier final et de r√©duire le temps de reconstruction, en utilisant le param√®tre <code>--mesh-size</code>.</p>
<p>Par d√©faut, la valeur est de <code>200000</code>, ce qui signifie que le maillage ne doit pas d√©passer 200 000 sommets. Cela ne prend pas en compte la taille de la sc√®ne ou la densit√© des points. Cela peut amener √† des maillages tr√®s diff√©rents en fonction de la sc√®ne. Par exemple, un maillage de 200 000 sommets pour une sc√®ne de 100 m¬≤ n'aura pas la m√™me densit√© qu'un maillage de 200 000 sommets pour une sc√®ne de 1000 m¬≤. Exemple en image :</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Une fa√ßade</th><th style="text-align: center">B√¢timent entier</th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="guide/reconstruction/open_drone_map/mesh_wall.jpg" alt="1 fa√ßade" /></td><td style="text-align: center"><img src="guide/reconstruction/open_drone_map/mesh_whole_hdp.jpg" alt="B√¢timent entier" /></td></tr>
</tbody></table>
</div>
<p>Nous pouvons constater que les deux maillages ont √† peu pr√®s le m√™me nombre de sommets et de faces mais une densit√© tr√®s diff√©rente.</p>
<p>On peut supposer que la densit√© plus faible sur l'image ci-dessus, √† droite, cr√©e des impr√©cisions : cage d'escalier et angles sup√©rieur droit dans cet exemple.</p>
<p>Pour √©viter que le faible nombre de sommets limite la reconstruction, nous avons donc utilis√© le param√®tre <code>--mesh-size</code> avec une valeur de <code>1000000</code>. Cependant, cela n'a pas eu l'effet escompt√©. Voici une comparaison :</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"><code>--mesh-size 200000</code></th><th style="text-align: center"><code>--mesh-size 1000000</code></th></tr></thead><tbody>
<tr><td style="text-align: center"><img src="guide/reconstruction/open_drone_map/mesh_whole_hdp_200000.jpg" alt="mesh-size 200000" /></td><td style="text-align: center"><img src="guide/reconstruction/open_drone_map/mesh_whole_hdp_1000000.jpg" alt="mesh-size 1000000" /></td></tr>
</tbody></table>
</div>
<p>Nous pouvons constater que la pr√©cision n'a pas augment√© dans la cage d'escaliers et sur l'angle du mur. Nous savons cependant que cette fa√ßade peut √™tre tr√®s bien reconstruite car nous obtenons une bonne pr√©cision lorsque nous la traitons seule. Dans ce cas, nous pouvons alors supposer que c'est le nuage de points qui limite la reconstruction et non le maillage. Cela nous am√®ne aux param√®tres suivants.</p>
<h3 id="feature-quality-and-min-num-features"><a class="header" href="#feature-quality-and-min-num-features"><code>feature-quality</code> and <code>min-num-features</code></a></h3>
<p>Une des premi√®res (et plus importantes) √©tapes de la reconstruction est la d√©tection et l'extraction des points d'int√©r√™ts (<em>features</em>). C'est cette √©tape qui va permettre de mettre en correspondance les images entre elles et de reconstruire la sc√®ne.</p>
<p>OpenDroneMap offre la possibilit√© de contr√¥ler la qualit√© de ces points d'int√©r√™ts avec les param√®tres <code>--feature-quality</code> et <code>--min-num-features</code>.</p>
<p>Le param√®tre <code>--feature-quality</code> permet de contr√¥ler le redimensionnement des images. Il accepte les valeurs suivantes : <code>ultra</code>, <code>high</code>, <code>medium</code>, <code>low</code>, <code>lowest</code>. Par d√©faut, la valeur est <code>high</code>, cela correspond √† un redimensionnement √† 1/2. Pour obtenir de meilleurs r√©sultats, nous avons utilis√© la valeur <code>ultra</code>, ce qui revient √† ne pas redimensionner les images. Cependant, cela augmente le temps de reconstruction.</p>
<p>Le param√®tre <code>--min-num-features</code> permet de contr√¥ler le nombre de points d'int√©r√™ts √† extraire pour chaque image. Par d√©faut, la valeur est <code>10000</code>. Augmenter cette valeur permet d'augmenter le nombre de points d'int√©r√™ts d√©tect√©s. Cela est possible en abaissant progressivement les contraintes pour la qualit√© de ces points. Le r√©sultat obtenu est en g√©n√©ral de meilleure qualit√©. Cependant, cela augmente aussi le temps de reconstruction. Pour obtenir un indicateur de la valeur √† utiliser, on peut regarder la partie <code>Features</code> dans le fichier <code>odm_report/report.pdf</code> g√©n√©r√© √† la fin de la reconstruction.</p>
<h3 id="pc-quality"><a class="header" href="#pc-quality"><code>pc-quality</code></a></h3>
<p>Une autre √©tape importante de la reconstruction est la g√©n√©ration du nuage de points. C'est cette √©tape qui va permettre de g√©n√©rer le maillage et le mod√®le 3D.</p>
<p>OpenDroneMap offre la possibilit√© de contr√¥ler la qualit√© de ce nuage de points avec le param√®tre <code>--pc-quality</code> (pour &quot;Point cloud quality&quot;). Ce param√®tre influence la r√©solution de la  carte de profondeur (<a href="https://en.wikipedia.org/wiki/Depth_map"><em>depthmap</em></a>) et donc la densit√© du nuage de points.</p>
<p>Il accepte les valeurs suivantes : <code>ultra</code>, <code>high</code>, <code>medium</code>, <code>low</code>, <code>lowest</code>. Par d√©faut, la valeur est <code>medium</code>. Attention, une valeur trop haute peu introduire du bruit. Il faut √©galement prendre en compte que chaque palier multiplie le temps de calcul par 4 environ.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="recherches-men√©es"><a class="header" href="#recherches-men√©es">Recherches men√©es</a></h1>
<blockquote>
<p>Cette section regroupe les questions que nous nous sommes pos√©es et les r√©ponses que nous y avons trouv√©es au cour de la mise en place du projet.
Une grande partie du contenu a d√©j√† √©t√© abord√©e dans la partie <strong>Guide</strong>.</p>
</blockquote>
<h2 id="mat√©riel-√†-disposition"><a class="header" href="#mat√©riel-√†-disposition">Mat√©riel √† disposition</a></h2>
<p>Avant de se lancer dans quoi que ce soit, nous avons besoin de faire un inventaire du mat√©riel et des logiciels √† disposition pour ce projet.</p>
<blockquote>
<p>‚úÖ Ce que nous avons :</p>
<ul>
<li><a href="https://www.dji.com/mavic-air-2/specs"><strong>Drone DJI Mavic Air 2</strong></a>
<ul>
<li>Drone</li>
<li>3 batteries &amp; chargeur</li>
<li>H√©lices</li>
<li>Manette + chargeur</li>
<li>Housse de transport</li>
</ul>
</li>
<li><strong>Mat√©riel informatique</strong>
<ul>
<li>Ordinateurs avec 16Go de RAM et GPUs</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="planning-du-projet"><a class="header" href="#planning-du-projet">Planning du projet</a></h2>
<p>Il est important de pr√©voir un planning g√©n√©ral et tenable du projet.
L'image ci-dessous illustre la r√©partition dans le temps des diff√©rentes √©tapes.
Celui-ci s'est av√©r√© tr√®s r√©aliste par rapport au d√©roulement de notre projet.
Etant donn√© que c'√©tait notre premier projet utilisant un drone, nous avons commenc√© par une partie &quot;Recherches&quot;, non mentionn√©e sur ce planning.
Cette partie nous a pris environ le m√™me temps que la partie &quot;Processing&quot;.</p>
<p>Ce diagramme est issu d'un site de planification de vol d‚ÄôUAV (Unmanned Aerial Vehicle) tr√®s int√©ressant √† lire : <a href="https://uav-guidelines.openaerialmap.org/pages/07-preparing-for-the-uav-mission/">UAV Mapping Guidelines</a>. On peut voir que la manipulation du drone ne repr√©sente qu'une minorit√© de la mission.</p>
<figure align="center">
    <img src="recherches/../guide/autorisations/planning.jpg" | width=600/>
    <figcaption>Planning de mission</figcaption>
</figure>
<h2 id="gps"><a class="header" href="#gps">GPS</a></h2>
<p>Le drone <strong>DJI Mavic Air 2</strong> a un syst√®me de localisation <strong>GPS+GLONASS</strong> (GPS est am√©ricain, GLONASS est russe) d'apr√®s ses <a href="https://www.dji.com/mavic-air-2/specs">caract√©ristiques</a>.
Si suffisamment de satellites sont disponibles pour √©tablir la localisation du drone lors de la prise de vue, les coordonn√©es GPS sont enregistr√©es dans les m√©tadonn√©es de chaque image.
Les informations sont enregistr√©es en altitude, latitude et longitude.
Pour les visualiser, vous pouvez utiliser la commande suivante :</p>
<pre><code class="language-bash">exiftool image.jpg
</code></pre>
<p>Vous pourrez alors lire toutes les m√©tadonn√©es de l'image et trouver les lignes qui se r√©f√®rent aux coordonn√©es GPS :</p>
<figure align="center">
    <img src="recherches/gps.png" | width=600/>
    <figcaption>M√©tadonn√©es d'altitude, latitude et longitude</figcaption>
</figure>
<p>Nous avons trouv√© deux raisons pour lesquelles les donn√©es GPS sont importantes √† acqu√©rir, et le plus pr√©cis√©ment possible :</p>
<ul>
<li>Rendre plus robuste la reconstruction 3D, qui s'appuie sur celles-ci pour √©viter les erreurs de correspondance entre les images.</li>
<li>Localiser la reconstruction 3D dans le monde r√©el.</li>
</ul>
<h2 id="qualit√©-des-images"><a class="header" href="#qualit√©-des-images">Qualit√© des images</a></h2>
<p>La qualit√© des images a son importance.
La nettet√© est indispensable pour le bon fonctionnement de la d√©tection des points d'int√©r√™t et donc pour une bonne reconstruction.
D√©tecter des points d'int√©r√™t sur des images floues est tr√®s difficile.</p>
<p>Le drone <strong>DJI Mavic Air 2</strong> a plusieurs modes de capture d'images :</p>
<ul>
<li>Vid√©o (jusqu'√† 3840√ó2160 px)</li>
<li>Photo 12 m√©gapixel (4000x3000 px)</li>
<li>Photo 48 m√©gapixel (8000x6000 px)</li>
</ul>
<p>La vid√©o est tr√®s lourde √† stocker, traiter et de moins bonne r√©solution que les photos.
Nous choisissons donc une acquisition par photos.</p>
<p>Les photos en 48 Mpx sont prises avec le m√™me capteur que les photos en 12 Mpx.
Elles sont cependant beaucoup plus lourdes √† stocker et traiter.
Ce choix peut √™tre envisag√© si la qualit√© de rendu est bien meilleure.
Cependant, l'utilisation du m√™me capteur provoque souvent l'apparition de bruit dans les zones un peu sombres (ombres par exemple).
(<a href="https://www.gsmarena.com/quad_bayer_sensors_explained-news-37459.php">Explications de l'utilisation d'un m√™me capteur pour r√©solutions sortantes diff√©rentes</a>).</p>
<p>La vid√©o <a href="https://www.youtube.com/watch?v=7-p04vKLEWI&amp;ab_channel=Paladrone">Mavic Air 2 - photogrammeÃÅtrie 12 vs 48 Mpx</a> effectue une comparaison entre les deux modes de prise de photo.
Ci-dessous un tableau extrait de la vid√©o comparant diff√©rents points entre les prises 12 et 48 Mpx.</p>
<figure align="center">
    <img src="recherches/12_48.png" | width=700/>
    <figcaption>Comparaison de l'utilisation de photos en 12 et 48 Mpx sur une m√™me mission</figcaption>
</figure>
<p>Les 2 rendus 3D issus des missions de cette vid√©o sont tr√®s similaires.
Les photos en 48 Mpx rendent parfois plus de d√©tails mais ont √©galement introduit du bruit sur certaines zones, ce que nous voulons √©viter.
Pour toutes ces raisons, nous choisissons de capturer les images en 12 Mpx.</p>
<p>Il y a √©galement la possibilit√© de capturer les images au format RAW en m√™me temps que JPG.
Le tableau ci-dessous pr√©sente le nombre d'images que nous pouvons prendre avec 8Go de stockage (m√©moire interne du drone) avec ou sans le format RAW.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center"></th><th style="text-align: center">JPEG 12MP</th><th style="text-align: center">JPEG 12MP + RAW</th></tr></thead><tbody>
<tr><td style="text-align: center">8Go stockage</td><td style="text-align: center">1599 photos</td><td style="text-align: center">278 photos</td></tr>
</tbody></table>
</div>
<h2 id="recouvrement"><a class="header" href="#recouvrement">Recouvrement</a></h2>
<p>L'algorithme de reconstruction 3D utilise les diff√©rences de perspectives entre les points communs de deux images.
C'est pourquoi, il est indispensable que des images successives aient une zone en commun.
On parle de recouvrement.
L'image ci dessous illustre √† quoi correspond un pourcentage de recouvremet ou <em>overlap</em>.</p>
<figure align="center">
    <img src="recherches/overlap.png" | width=600/>
    <figcaption>Pourcentages d'<i>overlap</i></figcaption>
</figure>
<p>Nous nous sommes demand√© quel serait le recouvrement optimal √† choisir entre nos images.
D'apr√®s nos recherche, il est recommand√© pour faire une bonne acquisition d'avoir au moins 70%
(id√©alement 80%) de recouvrement horizontal et 60% (id√©alement 70%) de recouvrement vertical.
Ces valeurs varient selon les sources mais correspondent aux ordres de grandeurs recommand√©s par
<a href="https://docs.opendronemap.org/tutorials/#flight-height">Open Drone Map</a> et
<a href="https://support.pix4d.com/hc/en-us/articles/203756125-How-to-verify-that-there-is-enough-overlap-between-the-images-PIX4Dmapper">Pix4D</a>.</p>
<p>Voici une image afin d'illustrer les termes recouvrement horizontal (<em>forward overlap</em>) et vertical (<em>side overlap</em> ou <em>sidelap</em>) :</p>
<figure align="center">
    <img src="recherches/two_overlaps.png" | width=600/>
    <figcaption>Recouvrement horizontal (<i>forward overlap</i>) et vertical (<i>sidelap</i>)</figcaption>
</figure>
<blockquote>
<p>‚ö†Ô∏è Attention, les valeurs de cette illustration ne correspondent pas aux recommandations dans notre cas.</p>
</blockquote>
<h2 id="g√©n√©ration-des-missions"><a class="header" href="#g√©n√©ration-des-missions">G√©n√©ration des missions</a></h2>
<p>Afin d'acqu√©rir ces images avec un recouvrement donn√© de mani√®re pr√©cise, il est possible, et recommand√©, de g√©n√©rer un parcours de vol.
Ce parcours correspond √† une liste de points (coordonn√©es GPS et altitude) pour lesquels
le drone capturera une image selon des param√®tres (orientation de la boussole, angle de la cam√©ra, r√©solution, ...).
Cependant, l'application officielle <a href="https://www.dji.com/global/downloads/djiapp/dji-fly">DJI Fly</a> ne supporte pas les vol planifi√©s.
Nous devront trouver une autre application compatible avec notre drone qui inclut cette fonctionnalit√©.
Diff√©rentes solutions existent, avec des avantages, inconv√©nients et, bien s√ªr, prix diff√©rents.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Outil</th><th style="text-align: center">Prix</th><th style="text-align: center">Open Source</th><th style="text-align: center">Avantages / Inconv√©nients</th><th style="text-align: center">Fonctionne avec le gestionnaire de vol</th></tr></thead><tbody>
<tr><td style="text-align: center"><a href="https://afbayonac.github.io/grid-photogrammetry/">Grid Photogrammetry</a></td><td style="text-align: center">0‚Ç¨</td><td style="text-align: center"></td><td style="text-align: center">Tr√®s intuitif et en ligne mais manque de fonctionnalit√©s (<em>cross grid</em> par exemple)</td><td style="text-align: center">Litchi</td></tr>
<tr><td style="text-align: center"><a href="https://ancient.land/">Ancient Land</a></td><td style="text-align: center">0‚Ç¨</td><td style="text-align: center"></td><td style="text-align: center">Tr√®s intuitif et en ligne mais manque de fonctionnalit√©s (<em>cross grid</em> et ajout de drone inconnu par exemple)</td><td style="text-align: center">Litchi</td></tr>
<tr><td style="text-align: center"><a href="https://plugins.qgis.org/plugins/drone_path/">Plugin QGIS drone_path</a></td><td style="text-align: center">0‚Ç¨</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">Litchi</td></tr>
<tr><td style="text-align: center"><a href="https://ardupilot.org/planner/">MissionPlanner</a></td><td style="text-align: center">0‚Ç¨</td><td style="text-align: center">‚úÖ</td><td style="text-align: center">Toutes les fonctionnalit√©s que nous cherchons sont disponibles. Le logiciel n'est pas trop long √† prendre en main. Plusieurs bugs sont cependant √† relever.</td><td style="text-align: center">Mission Planner</td></tr>
<tr><td style="text-align: center"><a href="https://www.dronelink.com/">Dronelink</a></td><td style="text-align: center">39‚Ç¨ /mois /utilisateur pour la version pro avec plus d'un utilisateur (<a href="https://app.dronelink.com/pricing">d√©tails</a>).</td><td style="text-align: center">‚ùå</td><td style="text-align: center"><a href="https://support.dronelink.com/hc/en-us/articles/4411563374099">Mapping des fa√ßades</a> compris, gestionnaire de vol compris.</td><td style="text-align: center">Dronelink</td></tr>
<tr><td style="text-align: center"><a href="https://www.dronedeploy.com/">DroneDeploy</a></td><td style="text-align: center">329‚Ç¨ /mois pour une version personnelle (<a href="https://www.dronedeploy.com/pricing.html">d√©tails</a>).</td><td style="text-align: center">‚ùå</td><td style="text-align: center">Gestionnaire de vol et reconstruction compris dedans.</td><td style="text-align: center">DroneDeploy</td></tr>
</tbody></table>
</div><figure align="center">
    <img src="recherches/grid.png" | width=600/>
    <figcaption>Grille g√©n√©r√©e avec Grid Photogrammetry</figcaption>
</figure>
<p><a href="https://flylitchi.com/">Litchi Fly</a>, dont le nom est cit√© √† plusieurs reprises dans le tableau, est un gestionnaire de vol compatible avec les drone <strong>DJI</strong>.
Il ne permet pas la planification de missions mais il est possible d'en importer.
Il g√©n√®re les bonnes instructions qu'il envoie au drone pour r√©aliser la mission planifi√©e.
L'application inclut √©galement d'autres fonctionnalit√©s telles que les panoramas, le suivi d'objet,...
Contrairement √† l‚Äôapplication officielle DJI Fly, cette application permet de  <a href="https://flylitchi.com/help#waypoints-p3">suivre un itin√©raire pr√©d√©fini</a>.
C'est ce qui nous int√©resse ici.
L'application co√ªte <a href="https://play.google.com/store/apps/details?id=com.aryuthere.visionplus&amp;utm_source=global_co&amp;utm_medium=prtnr&amp;utm_content=Mar2515&amp;utm_campaign=PartBadge&amp;pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1">24,37‚Ç¨ sur Android</a> et est utilisable √† vie.</p>
<blockquote>
<p>La solution la plus pratique pour notre situation semble √™tre de g√©n√©rer l'itin√©raire dans <a href="https://ardupilot.org/planner/">Mission Planner</a>. Nous utiliserons ensuite <a href="https://github.com/YarostheLaunchpadder/MissionPlanner-to-Litchi">Mission Planner to Litchi</a> pour convertir le format d'export <code>.waypoints</code> de Mission Planner au format d'import CSV de <a href="https://flylitchi.com/">Litchi</a>.
Voici deux vid√©os int√©ressantes :</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=Vdxp_iXCcys&amp;ab_channel=OldGuyOnACouch">Exemple rapide d'utilisation de Mission Planner et Mission Planner to Litchi</a></li>
<li><a href="https://www.youtube.com/watch?v=dmjK2tUpf8c&amp;ab_channel=VisualJoy">Exemple complet utilisant Mission Planner, Mission Planner to Litchi, Litchi et WebODM</a>.</li>
</ul>
</blockquote>
<h2 id="pr√©traitement-des-images"><a class="header" href="#pr√©traitement-des-images">Pr√©traitement des images</a></h2>
<p>Normalement le traitement d'images avant le processing ne sera pas utile.
Il pourrait arriver qu'il soit n√©cessaire si jamais les images sont trop claires/sombres pour la d√©tection de points d'int√©r√™t.
Si jamais nous avons besoin de traiter des images, il faudrait les avoir au format RAW.</p>
<h2 id="reconstruction-3d"><a class="header" href="#reconstruction-3d">Reconstruction 3D</a></h2>
<p>Pour la reconstruction 3D, nous utilisons <a href="https://opendronemap.org/">Open Drone Map</a>, un logiciel gratuit et <a href="https://fr.wikipedia.org/wiki/Open_source">open source</a>.
Vous pouvez vous m√™me voir des projets d'exemple et naviguer dans les reconstructions 3D via <a href="https://demo.webodm.org/dashboard/">ce lien</a>
et en cliquant successivement sur les boutons comme indiqu√© que l'image :</p>
<figure align="center">
    <img src="recherches/webodm.png" | width=600/>
    <figcaption>Ouverture de projet sur WebODM</figcaption>
</figure>
<p>Amusez-vous ensuite √† tester les diff√©rentes options et outils du menu de gauche une fois le mod√®le 3D ouvert.</p>
<p>Il y a deux moyens d'utiliser OpenDroneMap :</p>
<ul>
<li>Avec une interface graphique (similaire √† celle de l'exemple) ‚û°Ô∏è <a href="https://github.com/OpenDroneMap/WebODM">Repo GitHub de WebODM</a></li>
<li>En lignes de commande ‚û°Ô∏è <a href="https://github.com/OpenDroneMap/ODM">Repo GitHub d'ODM</a></li>
</ul>
<p>Dans les deux cas, il est n√©cessaire de faire quelques lignes en ligne de commande pour mettre en place l'environnement.
Il existe sinon un <a href="https://opendronemap.org/webodm/download/#installer">installeur &quot;cl√©s en main&quot;</a>.</p>
<p>Nous avons test√© les deux m√©thodes qui fonctionnent tr√®s bien.
Nous avons cependant plus d'informations sur le d√©roul√© du traitement en ligne de commande.</p>
<p>Il est possible d'activer l'utilisation du GPU pour un traitement plus rapide.</p>
<h2 id="mat√©riel-n√©cessaire"><a class="header" href="#mat√©riel-n√©cessaire">Mat√©riel n√©cessaire</a></h2>
<p>Ces recherches nous ont permis de lister le mat√©riel dont nous avons besoin :</p>
<blockquote>
<p>üî¥ Ce dont nous avons besoin pour mener le projet √† bien :</p>
<ul>
<li><strong>Carte Micro SD</strong>
<ul>
<li>Le drone embarque seulement 8go de stockage interne.
La carte micro SD peut aller jusqu'√† 256Go.
Capacit√© de stockage √† d√©terminer plus pr√©cis√©ment apr√®s le premier essai r√©el.
128 voir 64 Go sont suffisants dans notre cas.
Peut √™tre r√©parti en plusieurs cartes micro SD de 32Go mais implique plus de pr√©cautions lors des vols.</li>
</ul>
</li>
<li><strong>Application de vol <a href="https://flylitchi.com/">Litchi Fly</a></strong>
<ul>
<li>Application de vol avec beaucoup de fonctionnalit√©s avanc√©es.</li>
<li>Contrairement √† l'application officielle <strong>DJI Fly</strong>, cette application permet de suivre une liste de positions GPS pour la prise de photos/vid√©os.
Cela permet de suivre automatiquement un parcours pr√©cis, comme une grille pour s'assurer de couvrir la zone d'int√©r√™t.</li>
<li>24,90$ US pour Android (Utilisation √† vie)</li>
</ul>
</li>
<li><strong>Test en conditions similaires</strong>
<ul>
<li>Pouvoir essayer le tout de bout en bout sur un projet de plus petite ampleur
(par exemple, autour d'une maison avec un peu d'espace autour).
Cela nous permettra de nous familiariser avec le drone mais surtout de r√©pondre √† des question auxquelles nous ne pouvons pas r√©pondre en restant au bureau.</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="test-de-vol"><a class="header" href="#test-de-vol">Test de vol</a></h2>
<p>Nous avons eu l'occasion de faire un vol test sur un terrain vierge.
Cela nous a permis de r√©pondre √† plusieurs questions :</p>
<ul>
<li>Est-ce que le point <strong>HOME</strong> est d√©fini automatiquement au lieu de d√©collage du drone ?
<ul>
<li>Oui.</li>
</ul>
</li>
<li>Est-ce que le d√©part et retour <strong>RTH</strong> (Return To Home) fonctionnent bien ?
<ul>
<li>Oui.</li>
</ul>
</li>
<li>Vitesse de vol.
<ul>
<li>R√©ponse d√©pendant de la mission.</li>
</ul>
</li>
<li>Altitude de vol.
<ul>
<li>R√©ponse d√©pendant de la mission.</li>
<li>Retour <strong>RTH</strong> monte √† 100m dans certains cas mais pas syst√©matiquement.</li>
</ul>
</li>
<li>L'intervalle de prise de photo est-il correct ?
<ul>
<li>Prise √† chaque <em>waypoint</em> qui fonctionne.</li>
<li>Prise √† chaque m√®tre fonctionne √©galement (param√®tre <code>Litchi Fly</code>).
Il faudra d√©sactiver cette option dont nous n'avons pas besoin.</li>
</ul>
</li>
<li>Vers o√π est orient√©e la cam√©ra ?
<ul>
<li>Elle est orient√©e vers l'avant du drone.</li>
</ul>
</li>
<li>Quel est le degr√© d'inclinaison de la cam√©ra ?
<ul>
<li>Le degr√© lorsque la mission d√©bute est conserv√©.
Il faut donc r√©gler l'inclinaison avant le d√©but de la mission.</li>
</ul>
</li>
<li>Est-ce que le temps de vol annonc√© par <code>Litchi Fly</code> est correct ?
<ul>
<li>Non pas du tout. Le temps pout s'arr√™ter et red√©marrer n'est pas pris en compte.
<code>Litchi Fly</code> calcule probablement en consid√©rant que chaque d√©placement est effectu√© √† la vitesse de croisi√®re renseign√©e.</li>
</ul>
</li>
<li>La gestion de la batterie est-elle bien effectu√©e ?
<ul>
<li>Oui, √† 20%, le drone demande √† revenir. On peut prolonger l'utilisation.
√Ä 10%, le drone se pose l√† o√π il se trouve.</li>
</ul>
</li>
<li>Le param√®tre <code>Initial direction</code> de <code>Litchi FLy</code> a-t-il bien fonctionn√© ?
<ul>
<li>Oui.</li>
</ul>
</li>
<li>Essai des filtres UV.</li>
</ul>
<h2 id="estimation-de-la-hauteur"><a class="header" href="#estimation-de-la-hauteur">Estimation de la hauteur</a></h2>
<p>Pour pr√©voir les vols, nous avons besoin de conna√Ætre la hauteur du b√¢timent.</p>
<figure align="center">
    <img src="recherches/hotel.jpg" | width=600/>
    <figcaption>Arri√®re de l'H√¥tel de la Paix</figcaption>
</figure>
<p>Sur cette image, on peut voir 6 √©tages de balcons et 2 √©tages en dessous.
Il ne faut pas non plus oublier l'√©paisseur du toit et les d√©corations encadr√©es en bleu.
Il semblerait que la taille moyenne d'un b√¢timent de 7 √©tages soit de 23m, soit 3,3m par √©tage.
(Environ 2,5m par √©tage, plus l'√©paisseur entre les √©tages).
Dans notre cas, nous pouvons alors essayer d'estimer la taille de l'h√¥tel :</p>
<ul>
<li>8 √©tages soit 27m</li>
<li>L'√©paisseur du toit semble faire presque la hauteur d'un √©tage, on rajoute 5m les d√©corations encadr√©es en bleu. Cela nous donne 8,5m √† ajouter.</li>
</ul>
<p>Nous estimons donc la taille du b√¢timent √† 30,5 et 35,5m √† l'entr√©e.</p>
<blockquote>
<p>Nous n'√©tions pas si loin, un vol de reconnaissance nous a fait savoir que le toit s'√©l√®ve √† 27m et les d√©corations √† 32m.</p>
</blockquote>
<p>Nous nous demandons ensuite √† quelle hauteur r√©aliser le vol du drone par rapport au toit.
D'apr√®s cet <a href="https://enterprise-insights.dji.com/blog/roof-inspection-workflow">article</a>, la hauteur id√©ale pour voler au dessus d'un toit serait de:</p>
<ul>
<li>7,5/15m pour un b√¢timent r√©sidentiel</li>
<li>15/30m pour un b√¢timent commercial</li>
</ul>
<p>Si nous partons sur la hauteur d'un b√¢timent r√©sidentiel, on obtient une hauteur de vol de : <code>30,5 + 10 = 40,5m</code> et <code>45,5m</code> √† l'entr√©e.</p>
<h2 id="planification-relative-au-point-de-d√©part"><a class="header" href="#planification-relative-au-point-de-d√©part">Planification relative au point de d√©part</a></h2>
<p>Dans notre cas, les images dont nous b√©n√©ficions pour planifier la mission √©taient de mauvaise qualit√©.
De plus, de nombreux obstacles √©taient pr√©sents sur le terrain.
Nous aurions aim√© planifier une mission relativement √† un point de d√©part et non avec des positions GPS d√©finies √† l'avance.</p>
<p>Nous devons approfondir nos recherches √† ce sujet.</p>
<blockquote>
<p>Apr√®s quelques recherches, il semblerait que ce soit impossible de planifier une mission relative √† un point de d√©part, quel que soit le logiciel utilis√©.</p>
</blockquote>
<h2 id="reconstruction-1"><a class="header" href="#reconstruction-1">Reconstruction</a></h2>
<p>Voici un tableau comparant le temps de traitement pour des sous-sections d'une m√™me mission en fonction du nombre d'images et de l'ordinateur utilis√©.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Nombre d'images</th><th style="text-align: center">WebODM / ODM</th><th style="text-align: center">GPU</th><th style="text-align: center">Temps de traitement</th><th style="text-align: center">PC</th></tr></thead><tbody>
<tr><td style="text-align: center">30</td><td style="text-align: center">WebODM</td><td style="text-align: center">Non</td><td style="text-align: center">9 mins 31 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC1">1</a></sup></td></tr>
<tr><td style="text-align: center">20</td><td style="text-align: center">ODM</td><td style="text-align: center">Non</td><td style="text-align: center">7 mins 55 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC1">1</a></sup></td></tr>
<tr><td style="text-align: center">20</td><td style="text-align: center">ODM</td><td style="text-align: center">Oui</td><td style="text-align: center">5 mins 52 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC1">1</a></sup></td></tr>
<tr><td style="text-align: center">50</td><td style="text-align: center">ODM</td><td style="text-align: center">Oui</td><td style="text-align: center">11 mins 58 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC1">1</a></sup></td></tr>
<tr><td style="text-align: center">52</td><td style="text-align: center">ODM</td><td style="text-align: center">Non</td><td style="text-align: center">12 mins 00 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC2">2</a></sup></td></tr>
<tr><td style="text-align: center">52</td><td style="text-align: center">ODM</td><td style="text-align: center">Oui</td><td style="text-align: center">8 mins 50 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC2">2</a></sup></td></tr>
<tr><td style="text-align: center">100</td><td style="text-align: center">ODM</td><td style="text-align: center">Oui</td><td style="text-align: center">20 mins 52 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC1">1</a></sup></td></tr>
<tr><td style="text-align: center">237</td><td style="text-align: center">ODM</td><td style="text-align: center">Non</td><td style="text-align: center">55 mins 40 secs</td><td style="text-align: center"><sup class="footnote-reference"><a href="#PC2">2</a></sup></td></tr>
</tbody></table>
</div>
<div class="footnote-definition" id="PC1"><sup class="footnote-definition-label">1</sup>
<p>Intel i7-10870H CPU @ 2.20GHz + GPU Geforce GTX 1650 Ti Max-Q + 16Go Ram + 8Go Swap</p>
</div>
<div class="footnote-definition" id="PC2"><sup class="footnote-definition-label">2</sup>
<p>Intel i7-11800H CPU @ 2.30GHz + GPU GeForce RTX 3050 Laptop + 16Go Ram + 8Go Swap</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bibliographie"><a class="header" href="#bibliographie">Bibliographie</a></h1>
<blockquote>
<p>Cette section regroupe tous les liens vers les documentations que nous avons trouv√©es int√©ressantes.</p>
</blockquote>
<h2 id="logiciels-et-mat√©riel"><a class="header" href="#logiciels-et-mat√©riel">Logiciels et mat√©riel</a></h2>
<ul>
<li><a href="https://www.dji.com/mavic-air-2/specs">Specs du drone Mavic Air 2</a></li>
<li><a href="https://opendronemap.org/">Site d'Open Drone Map</a></li>
<li><a href="https://flylitchi.com/">Site de Litchi Fly</a></li>
<li><a href="https://ardupilot.org/planner/docs/mission-planner-overview.html">Documentation Mission Planner</a></li>
</ul>
<h2 id="planification-de-vol"><a class="header" href="#planification-de-vol">Planification de vol</a></h2>
<h3 id="pr√©paration--r√©alisation-des-cartes--m√©thodes"><a class="header" href="#pr√©paration--r√©alisation-des-cartes--m√©thodes">Pr√©paration / r√©alisation des cartes / m√©thodes</a></h3>
<ul>
<li>Article internet sur la pr√©paration de mission : <a href="https://uav-guidelines.openaerialmap.org/pages/07-preparing-for-the-uav-mission/">Preparing for the UAV Mission</a></li>
<li>Astuces d'Open Drone Map pour les vols : <a href="https://docs.opendronemap.org/flying/">Open Drone Map - Flying tips</a></li>
<li><a href="https://help.dronedeploy.com/hc/en-us/articles/1500004964282-Making-Successful-Maps">R√©aliser des cartes de qualit√©</a></li>
<li><a href="https://www.hammermissions.com/post/quality-drone-maps-and-3d-models">Augmenter la qualit√© de ses plans de vol pour une meilleure reconstruction</a></li>
<li><a href="https://civiltracker.xyz/how-to-make-great-drone-maps/">Comment r√©aliser de bonne cartes de vol</a></li>
</ul>
<h3 id="logiciels"><a class="header" href="#logiciels">Logiciels</a></h3>
<ul>
<li><a href="https://geonadir.com/what-is-the-best-desktop-drone-mapping-software/">Comparatif de diff√©rents logiciel</a></li>
<li>G√©n√©rateur de grille : <a href="https://afbayonac.github.io/grid-photogrammetry/">Grid-photogrammetry</a></li>
<li>G√©n√©rateur de grille : <a href="https://ancient.land/">Ancien land</a>
<ul>
<li><a href="https://www.youtube.com/watch?v=8NN9ETHamwY&amp;ab_channel=JamesDeRose">Vid√©o de d√©mo</a></li>
</ul>
</li>
<li>G√©n√©rateur de grille : <a href="https://plugins.qgis.org/plugins/drone_path/">Plugin QGIS drone_path</a></li>
<li><a href="https://www.dronelink.com/">Dronelink</a>
<ul>
<li><a href="https://app.dronelink.com/pricing">Prix</a></li>
<li><a href="https://support.dronelink.com/hc/en-us/articles/4405635351315">Grid mapping</a></li>
<li><a href="https://support.dronelink.com/hc/en-us/articles/4411563374099">Facade mapping</a></li>
<li><a href="https://support.dronelink.com/hc/en-us/articles/360025829933-What-are-the-system-requirements-Supported-drones-and-devices-">Mavic Air 2 support√©</a></li>
<li><a href="https://webodm.net/dronelink">D√©mo Dronelink + WebODM</a></li>
</ul>
</li>
<li><a href="https://www.dronedeploy.com/">DroneDeploy</a>
<ul>
<li><a href="https://www.dronedeploy.com/pricing.html">Prix</a></li>
</ul>
</li>
</ul>
<p>D√©monstrations vid√©o :</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=Vdxp_iXCcys&amp;ab_channel=Taranis">Vid√©o d√©mo Mission Planner To Litchi</a></li>
<li><a href="https://www.youtube.com/watch?v=mn8U-YJe1xY&amp;ab_channel=WindsweptRobert">Vid√©o mission avec Litchi</a></li>
</ul>
<h2 id="reconstruction-3d-1"><a class="header" href="#reconstruction-3d-1">Reconstruction 3D</a></h2>
<ul>
<li><a href="https://medium.com/data-breach/introduction-to-feature-detection-and-matching-65e27179885d">Introduction To Feature Detection And Matching</a></li>
<li><a href="https://odmbook.com/">A Comprehensive Guide To Use OpenDroneMap</a></li>
<li><a href="https://github.com/OpenDroneMap/WebODM/issues/340">Peu de b√©n√©fice √† calibrer les images d'apr√®s WebODM</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cr√©dits"><a class="header" href="#cr√©dits">Cr√©dits</a></h1>
<p>Ce projet n'aurait pas √©t√© possible sans les librairies et logiciels <a href="https://opensource.com/resources/what-open-source#:~:text=The%20term%20open%20source%20refers,approach%20to%20creating%20computer%20programs.">Open Source</a> que nous avons utilis√©s. Merci √† tous les contributeurs pour leur travail :</p>
<ul>
<li>üó∫Ô∏è <a href="https://ardupilot.org/planner/">Mission Planner</a>, pour la planification des missions.</li>
<li>ü™õ <a href="https://github.com/,YarostheLaunchpadder/MissionPlanner-to-Litchi">Mission Planner To Litchi</a>, pour la conversion du format de MissionPlanner √† celui de Litchi.</li>
<li>üß∞ <a href="https://opendronemap.org/">Open Drone Map</a> et sa <a href="https://community.opendronemap.org/">communaut√©</a>, pour la reconstruction.</li>
<li>üìö <a href="https://github.com/rust-lang/mdBook">MdBook</a>, pour l'√©criture de cette documentation.</li>
<li>üåç <a href="https://www.qgis.org/fr/site/">QGIS</a>, pour visualiser les aberration GPS.</li>
<li>üì∏ <a href="https://flameshot.org/">Flameshot</a>, pour les nombreuses captures d'√©cran dans cette documentation.</li>
<li>üîé <a href="https://www.meshlab.net/">Meshlab</a>, pour la visualisation des fichiers 3D.</li>
<li>üñåÔ∏è <a href="https://inkscape.org/fr/">Inkscape</a> et <a href="https://www.gimp.org/">GIMP</a>, pour l'√©dition d'images.</li>
<li>üé• <a href="https://www.blender.org/">Blender</a>, pour la r√©alisation de la vid√©o de rendu final.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributeurs"><a class="header" href="#contributeurs">Contributeurs</a></h1>
<p>üìö Le travail de recherche, de r√©alisation du projet et de documentation a √©t√© r√©alis√© par <a href="https://github.com/apluquet">Ad√®le PLUQUET</a> et <a href="https://linktr.ee/adrien.ludwig">Adrien LUDWIG</a>.</p>
<p>üèõÔ∏è L'entreprise ayant permis la mise en place de ce projet est <a href="https://www.mitsiomotu.com/">Mitsio Motu</a>, entreprise de conseil sp√©cialis√©e dans la collecte et l'analyse des donn√©es en Afrique.</p>
<p>ü§ù Ce projet a √©t√© rendu possible gr√¢ce √† un partenariat avec <a href="https://flyinglabs.org/">Flying Labs</a>, et plus particuli√®rement <a href="https://flyinglabs.org/togo/">Flying Labs Togo</a> qui ont obtenu les autorisations de vol, pr√™t√© plusieurs drones et accompagn√© sur toutes les missions terrain.</p>
<p>üîó Le <a href="https://mitsio-motu-data.github.io/fipa/">site internet</a> pr√©sentant le r√©sultat obtenu pour l'H√¥tel de la Paix a √©t√© r√©alis√© par <a href="https://github.com/bkgn">Boris KAGAN</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
